(this.webpackJsonplibrary=this.webpackJsonplibrary||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var c=n(3),r=n(7),a=n(0),s=n.n(a),o=n(52),i=n.n(o),u=(n(92),n(64)),l=(n(93),n(16)),d=n(9),b=(n(75),n(21)),h="data:image/png;base64,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",j=n(114),O=10,p=500,f=function(e){return new Promise((function(t){return setTimeout(t,Math.ceil(1e3*e))}))};String.prototype.format=function(){for(var e=this,t=0;t<arguments.length;t++){var n=new RegExp("\\{"+t+"\\}","gi");e=e.replace(n,arguments[t])}return e};var g={position:"bottom-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0},x=n(6),v=!1,k=["available","checkedOut","reserved","overDue","lost","damaged","given","notAvailable","deleted"];var A=function(e){var t=Object(a.useState)(""),n=Object(d.a)(t,2),s=n[0],o=n[1],i=Object(j.a)(s,50),u=Object(d.a)(i,1)[0],g=Object(a.useState)([]),A=Object(d.a)(g,2),m=A[0],S=A[1],y=Object(a.useState)([]),D=Object(d.a)(y,2),T=D[0],E=D[1],C=Object(a.useState)(0),w=Object(d.a)(C,2),B=w[0],R=w[1],I=Object(a.useState)(0),P=Object(d.a)(I,2),K=P[0],U=P[1],H=Object(a.useState)([]),L=Object(d.a)(H,2),N=L[0],Y=L[1],q=Object(a.useState)([]),z=Object(d.a)(q,2),Z=z[0],F=z[1];function M(){return W.apply(this,arguments)}function W(){return(W=Object(r.a)(Object(c.a)().mark((function t(){var n,r,a,s,o,i;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(console.log("All data loaded "+v),v=!0,b.c.dismiss(),console.log("Done"),n=[],r=e.doc.rent,a=0;a<r.length;a++)n.push({code:r[a].book_id,retDate:r[a].return_date,state:r[a].state});for(F(n),s=[],o=e.doc.book,i=0;i<o.length;i++)s.push({code:o[i]._id,name:o[i].title,author:o[i].author,claim:o[i].claim,totalName:"",category:o[i].publisher,publish:o[i].publisher});Y(s);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(a.useEffect)((function(){function t(){return(t=Object(r.a)(Object(c.a)().mark((function t(){return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.doc.setCallback(M);case 1:if(e.doc.isOpen()){t.next=6;break}return t.next=4,f(.1);case 4:t.next=1;break;case 6:console.log("Data should be loaded");case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){function t(e){return n.apply(this,arguments)}function n(){return(n=Object(r.a)(Object(c.a)().mark((function t(n){var r,a,s,o,i,u,d,b,h,j,O;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=[],a=0;case 2:if(!(a<N.length)){t.next=36;break}if(s=N[a],o=0,!(r.length>=p)){t.next=7;break}return t.abrupt("break",36);case 7:if(!s.name||!s.name.toString().includes(n)){t.next=33;break}i="".concat(s.name),u=e.text.available,d="",b=Object(l.a)(Z),t.prev=12,b.s();case 14:if((h=b.n()).done){t.next=23;break}if((j=h.value).code!==s.code){t.next=21;break}return o=parseInt(j.state),u=e.text[k[o]],1!==o&&3!==o||(d=e.text.returnDate+" "+j.retDate),t.abrupt("break",23);case 21:t.next=14;break;case 23:t.next=28;break;case 25:t.prev=25,t.t0=t.catch(12),b.e(t.t0);case 28:return t.prev=28,b.f(),t.finish(28);case 31:O={index:a,state:o,text:i,name:s.name,code:s.code.toString(),rent:u,retDate:d},r.push(O);case 33:a++,t.next=2;break;case 36:return t.abrupt("return",r);case 37:case"end":return t.stop()}}),t,null,[[12,25,28,31]])})))).apply(this,arguments)}function a(){return(a=Object(r.a)(Object(c.a)().mark((function e(){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=7;break}return e.next=3,t(u);case 3:(n=e.sent).length>0?S(n):S([]),e.next=8;break;case 7:S([]);case 8:R(0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[u,N,Z,e]),Object(a.useEffect)((function(){var e=m.length;if(console.log("Page num "+B.toString),e>O){var t=B*O,n=Math.min(O,e-t);E(m.slice(t,t+n))}else E(m),R(0)}),[m,B]);var V=function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:-1===K||K!==t?(console.log("Select "+t),U(t)):(console.log("Deselect "+t),U(-1));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{id:"search",children:[Object(x.jsxs)("div",{id:"title",children:[Object(x.jsx)("img",{id:"logo",src:h,alt:"HKMCC"}),Object(x.jsxs)("h1",{children:[" ",e.text.searchTitle," "]})]}),Object(x.jsxs)("div",{id:"searchContents",children:[Object(x.jsx)("input",{id:"searchInput",placeholder:e.text.searchBook,value:s,onChange:function(e){o(e.target.value)}}),T.map((function(e){return function(e){var t=e.index!==K,n=N[e.index],a=t?"searchResult":"selectedSearchResult",s=1===e.state||3===e.state,o=s?1:2;return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{id:a,onClick:Object(r.a)(Object(c.a)().mark((function t(){return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V(e.index);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),children:Object(x.jsx)("table",{children:Object(x.jsx)("tbody",{children:Object(x.jsxs)("tr",{className:"searchTr",children:[Object(x.jsxs)("td",{className:"searchTitle",children:[" ",e.text]}),Object(x.jsxs)("td",{className:"searchRent",children:[" ",e.rent," "]})]})})})}),!t&&Object(x.jsx)("div",{children:Object(x.jsx)("table",{children:Object(x.jsxs)("tbody",{children:[Object(x.jsxs)("tr",{children:[Object(x.jsxs)("td",{id:"authorField",children:[n.author," "]}),Object(x.jsxs)("td",{colSpan:"2",rowSpan:"2",children:[n.totalName," ",Object(x.jsx)("b",{children:n.name})]})]}),Object(x.jsx)("tr",{children:Object(x.jsxs)("td",{id:"authorField",children:[n.code," "]})}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{id:"authorField",children:n.publish}),Object(x.jsxs)("td",{colSpan:o,children:[" ",n.claim," "]}),s&&Object(x.jsx)("td",{children:e.retDate})]})]})})})]},e.code)}(e)}))]}),m.length>O&&Object(x.jsx)("div",{id:"pageControl",children:Object(x.jsx)("table",{children:Object(x.jsx)("tbody",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{className:"page",children:0!==B?Object(x.jsx)("button",{id:"prevPage",hidden:!0,onClick:function(){B>0&&R(B-1)},children:" << "}):null}),Object(x.jsxs)("td",{className:"page",id:"pageNum",children:[" ",B+1," "]}),Object(x.jsx)("td",{className:"page",children:m.length>(B+1)*O?Object(x.jsx)("button",{id:"nextPage",onClick:function(){m.length>(B+1)*O&&R(B+1)},children:" >> "}):null})]})})})})]})},m=new Set;var S,y,D=function(e){var t=Object(a.useState)(""),n=Object(d.a)(t,2),s=n[0],o=n[1],i=Object(a.useState)([]),u=Object(d.a)(i,2),O=u[0],p=u[1],v=Object(a.useState)([]),k=Object(d.a)(v,2),A=k[0],S=k[1],y=Object(a.useState)([]),D=Object(d.a)(y,2),T=D[0],E=D[1],C=Object(j.a)(s,50),w=Object(d.a)(C,1)[0],B=Object(a.useState)([]),R=Object(d.a)(B,2),I=R[0],P=R[1],K=Object(a.useState)({code:-1}),U=Object(d.a)(K,2),H=U[0],L=U[1],N=Object(a.useState)(!1),Y=Object(d.a)(N,2),q=Y[0],z=Y[1];Object(a.useEffect)((function(){function t(){return t=Object(r.a)(Object(c.a)().mark((function t(){var n,r,a,s,o,i,u,l,d,h,j,O,x,v,k,A,m,y,D,T,E;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:b.c.dismiss();case 1:if(e.doc.isOpen()){t.next=6;break}return t.next=4,f(.1);case 4:t.next=1;break;case 6:return console.log("CheckOut initialize"),console.log(e.text),t.next=10,e.doc.sheetsByTitle("user");case 10:return n=t.sent,t.next=13,e.doc.sheetsByTitle("rent");case 13:return r=t.sent,t.next=16,e.doc.sheetsByTitle("book");case 16:if(a=t.sent,n&&r&&a){t.next=22;break}return(s=g).autoClose=3e3,b.c.error(e.text.failedToOpen,s),t.abrupt("return");case 22:return console.log(n.header),console.log(n.header.name),o=e.doc.getCachedList("user"),i=e.doc.getCachedList("rent"),u=null,o.has(n.header.code.toString())&&o.has(n.header.name.toString())&&i.has(r.header.barcode.toString())&&i.has(r.header.user.toString())&&i.has(r.header.rentDate.toString())&&i.has(r.header.returnDate.toString())||(console.log("Data should be loaded"),(l=g).autoClose=!1,u=b.c.info(e.text.loading,l),console.log(e.text.loading)),console.log(a.header),console.log(n.name),t.next=32,e.doc.readList("user",[n.header.code,n.header.name]);case 32:return d=t.sent,h=d[0],j=d[1],t.next=37,e.doc.readList("rent",[r.header.barcode,r.header.user,r.header.rentDate,r.header.returnDate]);case 37:for(O=t.sent,x=O[0],v=O[1],k=O[2],A=O[3],m=[],y=[],D=0;D<Math.min(h.length,j.length);D++)m.push({code:h[D],name:j[D]});for(p(m),T=0;T<Math.min(h.length,j.length);T++)y.push({code:x[T],user:v[T],rentDate:k[T],returnDate:A[T]});S(y),F(a.header),console.log("Sheet read "+m.length),u&&((E=g).type=b.c.TYPE.SUCCESS,E.autoClose=3e3,E.render=e.text.succeededToOpen,b.c.update(u,E)),z(!0);case 52:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){return b.c.dismiss()}}),[]),Object(a.useEffect)((function(){function e(e){return t.apply(this,arguments)}function t(){return(t=Object(r.a)(Object(c.a)().mark((function e(t){var n,r,a,s,o,i;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=Object(l.a)(O),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=11;break}if(s=a.value,!(n.length>4)){e.next=8;break}return e.abrupt("break",11);case 8:(s.code&&s.code.toString().includes(t)||s.name&&s.name.toString().includes(t))&&(o="".concat(s.code,": ").concat(s.name),i={code:s.code,name:s.name,text:o},n.push(i),m.add(s.code));case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})))).apply(this,arguments)}function n(){return(n=Object(r.a)(Object(c.a)().mark((function t(){var n;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!w){t.next=7;break}return t.next=3,e(w);case 3:(n=t.sent).length>0?P(n):(console.log("No matching student"),P([])),t.next=9;break;case 7:console.log("No matching student"),P([]);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[w,O]);var Z=function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Select "+H.code+" "+t),console.log(H),H&&H.code&&H.code===t?(console.log("Deselect"),L({code:-1})):(console.log("Selected"),L({code:t}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var t=Object(r.a)(Object(c.a)().mark((function t(n){var r,a,s,o;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.doc.readList("book",[n.barcode,n.name]);case 2:for(r=t.sent,a=r[0],s=r[1],o=0;o<a.length;o++)T.push({code:a[o],name:s[o]});E(T),console.log("Book loaded "+T.length.toString());case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),M=function(t){var n=H.code!==t.code,a=[];if(!n){var s,o=Object(l.a)(A);try{for(o.s();!(s=o.n()).done;){var i=s.value;i.user===t.code&&(console.log(i),a.push(i))}}catch(u){o.e(u)}finally{o.f()}}return Object(x.jsxs)("div",{children:[Object(x.jsxs)("button",{type:"button",id:"searchResult",onClick:Object(r.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(t.code);case 2:case"end":return e.stop()}}),e)}))),children:[" ",t.text," "]}),Object(x.jsx)("div",{hidden:n,children:Object(x.jsx)("table",{children:Object(x.jsxs)("tbody",{children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{id:"bookname",children:e.text.bookName}),Object(x.jsx)("th",{id:"rentDate",children:e.text.rentDate}),Object(x.jsx)("th",{id:"returnDate",children:e.text.returnDate})]}),a.map((function(e){return function(e){var t=e.rentDate.split(" ")[0];console.log(t);for(var n="",c=0;c<T.length;c++)T[c].code===e.code&&(n=T[c].name);return Object(x.jsxs)("tr",{children:[Object(x.jsxs)("td",{children:[" ",n," "]}),Object(x.jsxs)("td",{children:[" ",t," "]}),Object(x.jsxs)("td",{children:[" ",e.returnDate," "]})]},e.code)}(e)}))]})})})]},t.code)};return Object(x.jsxs)("div",{id:"checkOut",children:[Object(x.jsxs)("div",{id:"title",children:[Object(x.jsx)("img",{id:"logo",src:h,alt:"HKMCC"}),Object(x.jsx)("h1",{children:e.text.checkOutTitle})]}),Object(x.jsxs)("div",{id:"checkOutInput",children:[Object(x.jsx)("input",{id:"searchInput",placeholder:e.text.searchUser,value:s,disabled:!q,onChange:function(e){o(e.target.value)}}),I.map((function(e){return M(e)}))]})]})},T=(n(95),n(78)),E=n(8),C=n(11),w=n(12),B=function(){function e(){Object(C.a)(this,e),console.log("Create Doc class"),this.initialized=!1,this.sheets={},this.bookReady=!1,this.rentReady=!1}return Object(w.a)(e,[{key:"checkState",value:function(){this.bookReady&&this.rentReady&&(this.initialized=!0,this.callback&&this.callback())}},{key:"setRent",value:function(e){this.rent=e,this.rentReady=!0,this.checkState()}},{key:"setBook",value:function(e){this.book=e,this.bookReady=!0,this.checkState()}},{key:"openDoc",value:function(){var e=Object(r.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,this.initialized=!0,e.next=8;break;case 4:return e.prev=4,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()},{key:"isOpen",value:function(){return this.initialized}},{key:"getCachedList",value:function(e){return new Set(Object.keys(this.sheets[e].cachedList))}},{key:"updateCell",value:function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.sheets[t].sheet){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,n.saveUpdatedCells();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setCallback",value:function(e){console.log("Update function registered"),this.callback=e}}]),e}(),R=B,I=n(65),P=n(113),K=n(70),U=Object(K.a)(S||(S=Object(u.a)(["\n    query AllBook{\n        books (sortBy: TITLE_ASC, limit:20000) {\n            _id\n            author\n            title\n            category\n            claim\n            publisher\n            seqnum\n        }\n    }\n"]))),H=Object(K.a)(y||(y=Object(u.a)(["\n    query AllRent{\n        rents (limit:20000) {\n            _id\n            book_id\n            rent_date\n            return_date\n            state\n        }\n    }\n"]))),L=new R,N={};var Y=function(){var e=Object(P.a)(H),t=e.loading,n=e.error,s=e.data,o=Object(P.a)(U),i=o.loading,u=o.error,l=o.data;return Object(a.useEffect)((function(){console.log("Rent Query Updated"),console.log(t),console.log(n),s&&(console.log("Data available"),console.log(s.rents),L.setRent(s.rents))}),[t,n,s]),Object(a.useEffect)((function(){console.log("Book Query Updated"),console.log(i),console.log(u),l&&(console.log("Book available"),console.log(l.books),L.setBook(l.books))}),[i,u,l]),Object(a.useEffect)((function(){function e(){return(e=Object(r.a)(Object(c.a)().mark((function e(){var t,n,r,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in console.log("Initialize app"),console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/library",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NAME:"library",REACT_APP_VERSION:"0.4.0"}).APP_NAME),console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/library",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NAME:"library",REACT_APP_VERSION:"0.4.0"}).APP_VERSION),t=navigator.languages,console.log(t),n={},n=t.length>0&&(t[0].toLowerCase().includes("kr")||t[0].toLowerCase().includes("ko"))?I.kr:I.en)N[r]=n[r];console.log(N),(a=g).type=b.c.TYPE.LOADING,a.autoClose=!1,b.c.info(N.loading,a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(x.jsx)(T.a,{children:Object(x.jsxs)("div",{className:"App",children:[Object(x.jsxs)(E.c,{children:[Object(x.jsx)(E.a,{path:"/",element:Object(x.jsx)(A,{doc:L,text:N})}),Object(x.jsx)(E.a,{path:"/checkOutHidden",element:Object(x.jsx)(D,{doc:L,text:N})})]}),Object(x.jsx)("div",{children:Object(x.jsx)(b.a,{newestOnTop:!0,closeOnClick:!0,rtl:!1,draggable:!0,pauseOnHover:!0,pauseOnFocusLoss:!1,transition:b.b})}),Object(x.jsxs)("h2",{children:["v ","0.4.0"]})]})})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,115)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},z=n(68),Z=n(111),F=n(110),M=n(112),W=n(109),V="data-xaque",G="https://realm.mongodb.com/api/client/v2.0/app/".concat(V,"/graphql"),J=new z.a(V);function X(){return Q.apply(this,arguments)}function Q(){return(Q=Object(r.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J.currentUser){e.next=5;break}return e.next=3,J.logIn(z.b.anonymous());case 3:e.next=7;break;case 5:return e.next=7,J.currentUser.refreshAccessToken();case 7:return e.abrupt("return",J.currentUser.accessToken);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=new Z.a({link:new F.a({uri:G,fetch:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(r.a)(Object(c.a)().mark((function e(t,n){var r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:return r=e.sent,n.headers.Authorization="Bearer ".concat(r),e.abrupt("return",fetch(t,n));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}),cache:new M.a});i.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(W.a,{client:_,children:Object(x.jsx)(Y,{})})}),document.getElementById("root")),q()},65:function(e){e.exports=JSON.parse('{"en":{"checkOut":"Check Out","checkOutTitle":"Check Out Status","search":"Search","searchTitle":"Book Search","loading":"Loading DB","succeededToOpen":"Succeeded to load","searchUser":"Enter name or ID","searchBook":"Enter book keywords","failedToOpen":"Failed to open DB Refresh page later","available":"Available","checkedOut":"Checked out","reserved":"Reserved","overDue":"Over due","lost":"Lost","damaged":"Damanged","given":"Given","notAvailable":"Not available","deleted":"Deleted","bookName":"Book name","rentDate":"Rent date","returnDate":"Return date"},"kr":{"checkOut":"\ub300\ucd9c\uae30\ub85d","checkOutTitle":"\ub300\ucd9c \uae30\ub85d \uc870\ud68c","search":"\ub3c4\uc11c\uac80\uc0c9","searchTitle":"\ub3c4\uc11c \uac80\uc0c9","loading":"DB \uc870\ud68c \uc911","succeededToOpen":"DB \uc870\ud68c \uc644\ub8cc","searchUser":"\uc774\ub984 \ub610\ub294 \ud68c\uc6d0\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694","searchBook":"\ucc45 \ud0a4\uc6cc\ub4dc\ub97c \uc785\ub825\ud558\uc138\uc694","failedToOpen":"DB \uc870\ud68c\uac00 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4 \uc7a0\uc2dc \ud6c4 \ud654\uba74\uc744 \uac31\uc2e0\ud574\uc8fc\uc138\uc694","available":"\ub300\ucd9c\uac00\ub2a5","checkedOut":"\ub300\ucd9c\uc911","reserved":"\uc608\uc57d\uc911","overDue":"\uc5f0\uccb4\uc911","lost":"\ubd84\uc2e4","damaged":"\ud30c\uc190","given":"\uae30\uc99d","notAvailable":"\ub300\ucd9c\ubd88\uac00","deleted":"\ud3d0\uae30","bookName":"\ub3c4\uc11c\uba85","rentDate":"\ub300\ucd9c\uc77c","returnDate":"\ubc18\ub0a9\uc77c"}}')},75:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.7cf24045.chunk.js.map