(this.webpackJsonplibrary=this.webpackJsonplibrary||[]).push([[1],{136:function(e){e.exports=JSON.parse('{"en":{"titleLong":"Holy Korean Martyrs Catholic Church Library","titleShort":"HKMCC Library","idHolder":"Enter User ID","pwHolder":"Enter email or phone","bookHolder":"Enter book ID","logIn":"Log In","logOut":"Log Out","logInSucceed":"Logged in","logInFail":"Log In Failed","nameSuffix":"","home":"Home","checkOutStatus":"Check Out Status","bookSearch":"Book Search","userSearch":"User Search","checkOut":"Check Out","return":"Return","extend":"Extend","history":"Rent History","situation":"Rent State","loading":"Loading DB","succeededToOpen":"Succeeded to load","searchUser":"Enter name or ID","searchBook":"Enter book keywords","failedToOpen":"Failed to open DB Refresh page later","all":"All","available":"Available","checkedOut":"Checked out","reserved":"Reserved","overDue":"Overdue","lost":"Lost","damaged":"Damanged","given":"Given","notAvailable":"Not available","deleted":"Deleted","id":"ID","bookName":"Book name","rentDate":"Rent date","returnDate":"Return date","dueDate":"Due date","noEntry":"No entry","notice":"Notice","newMember":"New Member","autoLogin":"AutoLogin","userMode":"User Mode","adminMode":"Admin Mode","normal":"Normal","stopped":"Stopped","homeText":"<div class=\\"container\\"><h2>Library Hours:</h2> <ul> <li>Every Sunday 9:30am~12:00pm</li> </ul> <h2>Book Borrowing:</h2> <ul> <li>Every Sunday 10:30am~12:00pm</li> <li>Maximum number of books for borrowing: 5</li> <li>Borrowing period: 3 weeks (Please request an extension from a volunteer at the time of borrowing or send an extension request email to <a href=\'mailto:hkmcc.library@gmail.com\'>hkmcc.library@gmail.com</a>)</li> <li>Book return: Please return the books to the return box in front of the library or directly to the library volunteers.</li> <li>Request for desired books: Please fill out and submit the desired book request form provided at the library.</li> </ul> <h2>For other inquiries:</h2> <ul> <li>Please contact the library by email at <a href=\'mailto:hkmcc.library@gmail.com\'>hkmcc.library@gmail.com</a>.</li> </ul></div>","INVALID_BOOK":"Unregistered book","INVALID_USER":"Invalid user","NOT_AVAILABLE":"Not available","OVERDUE":"Overdue account","RENTED":"Already rented book","MAX_RENTAL":"Max rent reached","NOT_RENTED":"Not a rented book","rentSucceed":"Rented","returnSucceed":"Returned","rentSuffix":" book(s) rented","confirmRent":"Rent this book?","confirmReturn":"Return this book?","confirm":"Confirm","cancel":"Cancel","name":"Name","registeredDate":"Registered","phone":"Phone","email":"Email","address":"Address","notice_":"Notice","level":"Level","save":"Save","confirmSave":"Save the modification?","kid":"Kid","adult":"Adult","admin":"Admin","regSuccess":"Registration Succeed","regFail":"Registration Fail","numberOnly":"Number Only","advSearch":"Advanced Search","search":"Search","author":"Author","bookCode":"Book code","finish":"Finish"},"kr":{"titleLong":"\ucc9c\uc8fc\uad50 \uc0b0\ud638\uc138 \ud55c\uad6d \uc21c\uad50\uc790 \uc131\ub2f9 \ub3c4\uc11c\uad00","titleShort":"HKMCC \ub3c4\uc11c\uad00","idHolder":"\ud68c\uc6d0\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694","pwHolder":"\uc774\uba54\uc77c\uc774\ub098 \uc804\ud654\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694","bookHolder":"\ub3c4\uc11c \ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694","logIn":"\ub85c\uadf8\uc778","logOut":"\ub85c\uadf8\uc544\uc6c3","logInSucceed":"\ub85c\uadf8\uc778 \uc131\uacf5","logInFail":"\ub85c\uadf8\uc778 \uc2e4\ud328","nameSuffix":" \ub2d8","home":"\ud648","checkOutStatus":"\ub300\ucd9c \uae30\ub85d \uc870\ud68c","bookSearch":"\ub3c4\uc11c \uac80\uc0c9","userSearch":"\ud68c\uc6d0 \uac80\uc0c9","checkOut":"\ub300\ucd9c","return":"\ubc18\ub0a9","extend":"\uc5f0\uc7a5","history":"\ub300\ucd9c \uc774\ub825","situation":"\ub300\ucd9c \ud604\ud669","loading":"DB \uc870\ud68c \uc911","succeededToOpen":"DB \uc870\ud68c \uc644\ub8cc","searchUser":"\uc774\ub984 \ub610\ub294 \ud68c\uc6d0\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694","searchBook":"\ucc45 \ud0a4\uc6cc\ub4dc\ub97c \uc785\ub825\ud558\uc138\uc694","failedToOpen":"DB \uc870\ud68c\uac00 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4 \uc7a0\uc2dc \ud6c4 \ud654\uba74\uc744 \uac31\uc2e0\ud574\uc8fc\uc138\uc694","all":"\uc804\uccb4","available":"\ub300\ucd9c\uac00\ub2a5","checkedOut":"\ub300\ucd9c\uc911","reserved":"\uc608\uc57d\uc911","overDue":"\uc5f0\uccb4\uc911","lost":"\ubd84\uc2e4","damaged":"\ud30c\uc190","given":"\uae30\uc99d","notAvailable":"\ub300\ucd9c\ubd88\uac00","deleted":"\ud3d0\uae30","id":"\ubc88\ud638","bookName":"\ub3c4\uc11c\uba85","rentDate":"\ub300\ucd9c\uc77c","returnDate":"\ubc18\ub0a9\uc77c","dueDate":"\ub300\ucd9c\uae30\ud55c","noEntry":"\ub0b4\uc5ed \uc5c6\uc74c","notice":"\uacf5\uc9c0 \uc0ac\ud56d","newMember":"\uc2e0\uaddc \ud68c\uc6d0","autoLogin":"\uc790\ub3d9 \ub85c\uadf8\uc778","userMode":"\uc77c\ubc18 \ubaa8\ub4dc","adminMode":"\uad00\ub9ac\uc790 \ubaa8\ub4dc","normal":"\uc815\uc0c1","stopped":"\ub300\ucd9c\uc911\uc9c0","homeText":"<div class=\\"container\\"><h2>\ub3c4\uc11c\uad00 \uac1c\ubc29\uc2dc\uac04:</h2><ul><li>\ub9e4 \uc8fc\uc77c(\uc77c) 9:30am~12:00pm</li></ul><h2>\ub3c4\uc11c \ub300\ucd9c:</h2><ul><li>\ub9e4 \uc8fc\uc77c 10:30am~12:00pm </li><li>\ub300\ucd9c \uad8c\uc218: \ucd5c\ub300 5\uad8c</li><li>\ub300\ucd9c \uae30\uac04: 3\uc8fc (\ub3c4\uc11c \ub300\ucd9c\uc2dc\uac04\uc5d0 \ubd09\uc0ac\uc790\uc5d0\uac8c \uc5f0\uc7a5\uc744 \uc694\uccad\ud558\uc2dc\uac70\ub098, <a href=\'mailto:hkmcc.library@gmail.com\'>hkmcc.library@gmail.com</a>\uc73c\ub85c \uc5f0\uc7a5 \uc2e0\uccad \uba54\uc77c\uc744 \ubcf4\ub0b4\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4.)</li><li>\ub3c4\uc11c \ubc18\ub0a9: \ub3c4\uc11c\uad00 \uc55e \ubc18\ub0a9\ud568\uc5d0 \ub123\uc5b4 \uc8fc\uc2dc\uac70\ub098 \ub3c4\uc11c\uad00 \ubd09\uc0ac\uc790\uc5d0\uac8c \uc9c1\uc811 \ubc18\ub0a9\ud558\uc5ec \uc8fc\uc2ed\uc2dc\uc624.</li><li>\ud76c\ub9dd \ub3c4\uc11c \uc2e0\uccad: \ub3c4\uc11c\uad00\uc5d0 \ube44\uce58\ub41c \ud76c\ub9dd \ub3c4\uc11c \uc2e0\uccad\uc11c\uc5d0 \uc791\uc131\ud558\uc5ec \uc81c\ucd9c\ud558\uc5ec \uc8fc\uc138\uc694.</li></ul></p><h2>\ubb38\uc758:</h2><ul><li>\ub3c4\uc11c\uad00 \uad00\ub828 \ubb38\uc758\ub294 \ub3c4\uc11c\uad00 \uc774\uba54\uc77c \uc8fc\uc18c <a href=\'mailto:hkmcc.library@gmail.com\'>hkmcc.library@gmail.com</a>\ub85c \ubb38\uc758 \ubc14\ub78d\ub2c8\ub2e4.</li></ul></div>","INVALID_BOOK":"\ub4f1\ub85d\ub418\uc9c0 \uc54a\uc740 \ub3c4\uc11c\uc785\ub2c8\ub2e4","INVALID_USER":"\ub4f1\ub85d\ub418\uc9c0 \uc54a\uc740 \ud68c\uc6d0\uc785\ub2c8\ub2e4","NOT_AVAILABLE":"\ub300\ucd9c \ubd88\uac00 \ub3c4\uc11c\uc785\ub2c8\ub2e4","OVERDUE":"\uc5f0\uccb4\uc911\uc785\ub2c8\ub2e4","RENTED":"\ub300\ucd9c\ub41c \ub3c4\uc11c\uc785\ub2c8\ub2e4","MAX_RENTAL":"\ub300\ucd9c \uad8c\uc218\ub97c \ucd08\uacfc\ud558\uc600\uc2b5\ub2c8\ub2e4","NOT_RENTED":"\ub300\ucd9c\ub418\uc9c0 \uc54a\uc740 \ub3c4\uc11c\uc785\ub2c8\ub2e4","rentSucceed":"\ub300\ucd9c \uc644\ub8cc","returnSucceed":"\ubc18\ub0a9 \uc644\ub8cc","rentSuffix":"\uad8c \ub300\ucd9c \uc911","confirmRent":"\ub300\ucd9c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","confirmReturn":"\ubc18\ub0a9\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","confirm":"\ud655\uc778","cancel":"\ucde8\uc18c","name":"\uc774\ub984","registeredDate":"\ub4f1\ub85d\uc77c","phone":"\uc804\ud654\ubc88\ud638","email":"\uc774\uba54\uc77c","address":"\uc8fc\uc18c","notice_":"\ube44\uace0","level":"\ub4f1\uae09","save":"\uc800\uc7a5","confirmSave":"\uc800\uc7a5\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","kid":"\uc544\ub3d9","adult":"\uc131\uc778","admin":"\uad00\ub9ac\uc790","regSuccess":"\ub4f1\ub85d \uc644\ub8cc","regFail":"\ub4f1\ub85d \uc2e4\ud328","numberOnly":"\uc22b\uc790\ub9cc \uc785\ub825\ud558\uc138\uc694","advSearch":"\uc0c1\uc138 \uac80\uc0c9","search":"\uac80\uc0c9","author":"\uc800\uc790","bookCode":"\ub3c4\uc11c\ubc88\ud638","finish":"\uc644\ub8cc"}}')},198:function(e){e.exports=JSON.parse('{"privateKey":"-----BEGIN RSA PRIVATE KEY-----\\nMIICYAIBAAKBgQCrjaN6qZ81C0wl1uegCHbI/psEvpTNzBCS42ZwvVDq2y69kXfx\\nkDygmKqWi8rTFm6lx474GOAKpneEQ3ragP017HbW55hrXhQu2jK/UE5OPdIImPF5\\nY2v28y0WEdWd0h6/4S28lSE5nG0IigsfuIh0FIvH9vGVwBqCPm1DOEAUIQIDAQAB\\nAoGAE/ZVUY6vUfLQl46cQUj62YSW8URj+FaIjy8a2n+NDOcYV0K4HEnWZDGfmAkI\\nPuvbUDsabdAnMdYRDjjz1H7L4Y52vU+ZqD3+kJ3iUsR9Ba+R17zS6F4HVNPCzUDI\\nOpgE+z8od8+on2cppBPHMEl/Ze+CcKYLz7bLs8zje8QHZMkCRQDyuEx9WQSCf0LS\\nds+jwr7npwVlbb737oal6UKuVzKv039aLaxBpsAeMQsSdXgBq2E2ChmC8SmPuB0V\\n0mutfSBu2UapkwI9ALTwh/iFkje7O/1wjCVZn4TnLz6a4nx676rydpsRy2PrDyQ3\\naC5SWmzQezeSTs9Qmbhxm4ZTj3Co4aeL+wJEC+zqNS5ufkrqaZTU1uL2pkMajMU7\\noMrjartvP0mhf+oQU8nysLcUsWcPeDS1VL+q4xDT+A8JT7poE25nQ/rl4Qxj4GkC\\nPQCR+zoIlWOZ2VMWMBayD7P22zqvzPCMM/dnuYVdqSaqr7wgoR9JuCHChxXSiRVS\\niBntyKMM5h/laivdLL8CRGdrBwiAkVrYnghDj+9UJX9Twox3oahPqYhzxWJR7jZ4\\nipOKhw9r+YfZDNDYpVgE+g2KB75tZlOU9Hx7dXyzANnsIueT\\n-----END RSA PRIVATE KEY-----\\n"}')},215:function(e,t,o){},216:function(e,t,o){},217:function(e,t,o){},229:function(e,t,o){},235:function(e,t){},237:function(e,t){},269:function(e,t){},271:function(e,t){},272:function(e,t){},277:function(e,t){},279:function(e,t){},299:function(e,t){},315:function(e,t){},318:function(e,t){},358:function(e,t,o){},359:function(e,t,o){},361:function(e,t,o){"use strict";o.r(t);var c=o(0),n=o.n(c),s=o(65),l=o.n(s),i=(o(215),o(216),o(18)),a=(o(217),o(1));var r=function(e){return Object(c.useEffect)((function(){!async function(){console.log("Home"),e.doc.setCallback(void 0)}()}),[]),e.doc.serverAvailable?(o.e(0).then(o.t.bind(null,408,7)),Object(a.jsxs)("div",{id:"home",children:[Object(a.jsx)(i.b,{className:"home-items",to:"/checkOut",children:e.text.checkOut}),Object(a.jsx)(i.b,{className:"home-items",to:"/return",children:e.text.return})]})):Object(a.jsx)("div",{id:"home",dangerouslySetInnerHTML:{__html:e.text.homeText}})},d=(o(43),o(57)),u=o(406);const b=10;String.prototype.format=function(){let e=this;for(let t=0;t<arguments.length;t++){let o=new RegExp("\\{"+t+"\\}","gi");e=e.replace(o,arguments[t])}return e};const j={position:"top-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0},h=function(e,t){return"0"===t||0===t?e.normal:"1"===t||1===t?e.overDue:"2"===t||2===t?e.stopped:void 0},O=function(e,t){switch(t){case"0":case 0:return e.available;case"1":case 1:return e.checkedOut;case"2":case 2:return e.reserved;case"3":case 3:return e.overDue;case"4":case 4:return e.lost;case"5":case 5:return e.damaged;case"6":case 6:return e.given;case"7":case 7:default:return e.notAvailable;case"8":case 8:return e.deleted}},g=function(e,t){if(e.name>t.name)return 1;if(e.name<t.name)return-1;const o=parseInt(e.claim_num),c=parseInt(t.claim_num);return o>c?1:o<c?-1:0},x=function(e,t){return e.name>t.name?1:e.name<t.name?-1:0},m=function(e,t){return e.rentDate>t.rentDate?1:e.rentDate<t.rentDate?-1:e.title>t.title?1:e.title<t.title?-1:0},f=function(e){return unescape(encodeURIComponent(e))},p="custom-loading-id",v="custom-logging-id";var k=o(8),S=o(94),E=o.n(S),N=o(96),y=o.n(N);var I=function(){console.log("Do nothing...")};var C,_,R,A,D,T,L,B,w,U,M,P=function(e){const[t,o]=Object(c.useState)([]),[n,s]=Object(c.useState)(0),[l,i]=Object(c.useState)([]);return Object(c.useEffect)((function(){console.log("Init List View")}),[]),Object(c.useEffect)((function(){o(e.list)}),[e.list]),Object(c.useEffect)((function(){s(0)}),[e.keyValue]),Object(c.useEffect)((function(){e.showCallback&&(I=e.showCallback)}),[e.showCallback]),Object(c.useEffect)((function(){const e=t.length;if(e>b){const o=n*b,c=Math.min(b,e-o);i(t.slice(o,o+c))}else i(t)}),[t,n]),Object(a.jsxs)("div",{id:"listView",children:[I(l,e.detail),t&&t.length>b&&Object(a.jsxs)("div",{id:"pageControl",children:[Object(a.jsx)("div",{className:"page",id:"page",children:Object(a.jsx)(E.a,{fontSize:"large",sx:{color:0===n?"#ffffff":"#404040"},onClick:()=>{console.log("Prev"),n>0&&s(n-1)}})}),Object(a.jsx)("div",{className:"pageNum",id:"pageNum",children:n+1}),Object(a.jsx)("div",{className:"page",id:"page",children:Object(a.jsx)(y.a,{fontSize:"large",sx:{color:t.length<=(n+1)*b?"#ffffff":"#404040"},onClick:()=>{console.log("Next"),t.length>(n+1)*b&&s(n+1)}})})]})]})},H=o(35),q=o(36);const F=Object(q.a)(C||(C=Object(H.a)(["\n    query AllBook{\n        book (limit:20000) {\n            _id\n            author\n            title\n            claim_num\n            num\n            series\n            category\n            claim\n            publisher\n            seqnum\n            registration_date\n            isbn\n            deleted\n        }\n    }\n"]))),K=Object(q.a)(_||(_=Object(H.a)(["\n    query AllRent{\n        rent (limit:20000) {\n            _id\n            book_id\n            user_id\n            rent_date\n            return_date\n            state\n        }\n    }\n"]))),z=Object(q.a)(R||(R=Object(H.a)(["\n    query AllUser {\n        user (limit: 20000) {\n            _id\n            name\n            state\n            level\n        }\n    }"]))),V=Object(q.a)(A||(A=Object(H.a)(["\n    query FindUser($_id: string){\n        user (where: {_id: {_eq: $_id}}) {\n            _id\n            name\n            state\n            level\n            encrypted_email\n            encrypted_phone\n        }\n    }"]))),G=Object(q.a)(D||(D=Object(H.a)(["\n    query findLogs($user_id: string){\n        rentLog (limit: 20000, where: {user_id: {_eq: $user_id}}) {\n            _id\n            book_id\n            book_state\n            timestamp\n            return_date\n            user_id\n        }\n    }"]))),Y=Object(q.a)(T||(T=Object(H.a)(["\n    query findLogs($book_id: string){\n        rentLog (limit: 20000, where: {book_id: {_eq: $book_id}}) {\n            _id\n            book_id\n            book_state\n            timestamp\n            return_date\n            user_id\n        }\n    }"]))),Q=Object(q.a)(L||(L=Object(H.a)(["\n    query findLogs ($fromTime: string, $toTime: string) {\n        rentLog(limit: 20000, where: {timestamp: {_gte: $fromTime, _lt: $toTime}}) {\n            _id\n            book_id\n            book_state\n            timestamp\n            return_date\n            user_id\n        }\n    }"]))),W=Object(q.a)(B||(B=Object(H.a)(["\n    query GetNotices {\n        notice (order_by: {date: asc}, limit:20000) {\n            _id\n            date\n            title\n        }\n    }"]))),Z=Object(q.a)(w||(w=Object(H.a)(["\n    query GetContent ($_id: string) {\n        notice (where: {_id: {_eq: $_id}}) {\n            _id\n            date\n            title\n            content\n        }\n    }"]))),$=Object(q.a)(U||(U=Object(H.a)(["\n    query GetServerInfo {\n        serverInfo {\n            _id\n            globalIp\n            localIp\n            port\n            proxy\n        }\n    }"]))),J=Object(q.a)(M||(M=Object(H.a)(["\n    query GetRequests($user_id: string) {\n        request (limit: 20000, where: {user_id: {_eq: $user_id}}) {\n            _id\n            user_id\n            action\n            state\n            book_id\n        }\n    }"])));var X=function(e){const[t,o]=Object(c.useState)([]),[n,s]=Object(c.useState)([]),[l,r]=Object(c.useState)(0),{loading:j,data:h,error:O}=Object(d.e)(W),{id:g}=Object(k.r)(),[x,{loading:m,data:f,error:p}]=Object(u.a)(Z,{variables:{_id:g}});Object(c.useEffect)((function(){!async function(){console.log("Notice"),e.doc.setCallback(void 0)}()}),[]),Object(c.useEffect)((()=>{console.log("Get Notice"),h&&o(h.notice)}),[h,O,j]),Object(c.useEffect)((()=>{console.log("Get Content")}),[f,p,m]),Object(c.useEffect)((()=>{const e=t.length;if(console.log("Page num "+l.toString()+" "),console.log(e),e>b){const o=l*b,c=Math.min(b,e-o);s(t.slice(o,o+c))}else s(t),r(0)}),[t,l]),Object(c.useEffect)((()=>{}),[n]),Object(c.useEffect)((()=>{console.log("Select id: "+g),g&&x()}),[g,x]);const v=e=>Object(a.jsxs)("tr",{className:"",children:[Object(a.jsxs)("td",{className:"",children:[" ",e.date," "]}),Object(a.jsxs)("td",{className:"noticeEntry",colSpan:"2",children:[g!==e._id&&Object(a.jsx)(i.b,{to:"/notice/"+e._id,children:e.title}),g===e._id&&Object(a.jsx)(i.b,{to:"/notice",children:e.title})]})]},e._id);return Object(a.jsxs)("div",{id:"notice",children:[Object(a.jsx)("div",{id:"title",children:Object(a.jsx)("h2",{children:e.text.notice})}),g&&f&&Object(a.jsx)("div",{id:"noticeContent",children:Object(a.jsx)("table",{className:"content",children:Object(a.jsxs)("tbody",{children:[v(f.notice[0]),Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"content",colSpan:"3",children:f.notice[0].content})})]})})}),Object(a.jsx)(P,{list:t,showCallback:e=>Object(a.jsx)("div",{id:"noticeList",children:Object(a.jsx)("table",{children:Object(a.jsx)("tbody",{children:n.length>0&&n.map((e=>v(e)))})})})})]})},ee=o(407),te=o(203);o(223);let oe=!1;var ce=function(e){const[t,n]=Object(c.useState)(""),[s,l]=Object(c.useState)([]),[r,d]=Object(c.useState)(0),[b,j]=Object(c.useState)([]),[h,x]=Object(c.useState)([]),[m,p]=Object(c.useState)(0),[v,S]=Object(c.useState)(!1),[E,N]=Object(c.useState)(!1),[y,I]=Object(c.useState)(""),[C,_]=Object(c.useState)(!1),[R,A]=Object(c.useState)(""),[D,T]=Object(c.useState)(""),[L,B]=Object(c.useState)(""),[w,U]=Object(c.useState)(""),[M,H]=Object(c.useState)(""),[q,F]=Object(c.useState)(0),[K,z]=Object(c.useState)([]),[V]=Object(ee.a)(t,300),[G,{data:Q}]=Object(u.a)(Y,{variables:{book_id:y}}),W=Object(c.useRef)("0"),Z=Object(c.useRef)(!1),$=Object(c.useRef)(0),J=Object(c.useRef)(!1),{id:X}=Object(k.r)();async function ce(){console.log("All data loaded "+oe),oe=!0;let t=[],o={};const c=e.doc.rent;for(let e=0;e<c.length;e++)t.push({code:c[e].book_id,retDate:c[e].return_date,state:c[e].state}),o[c[e].book_id]=c[e].state;x(t);let n=[];const s=e.doc.book;for(const e in s){const t=s[e],c=e in o?o[e]:0;n.push({code:t._id,name:t.title,state:c,num:t.num,author:t.author,claim:t.claim,regDate:t.registration_date,claim_num:t.claim_num,totalName:t.series,category:t.publisher,publish:t.publisher,isbn:t.isbn,deleted:t.deleted})}console.log("Load"),console.log(n.length),j(n),console.log(y),""!==y&&(console.log("Load history"),G())}function ne(e){console.log("Set state "+e.toString()),Z.current=!0,S(!0),p(e),$.current=e,console.log(r.toString()+Z.current)}function se(e){const t=e.toString(),o=document.getElementById(t).checked;console.log("Set Search state "+t+" Value: "+o),"1023"===t?(document.getElementById("1023").checked=o,document.getElementById("0").checked=o,document.getElementById("1").checked=o,document.getElementById("3").checked=o,document.getElementById("4").checked=o,document.getElementById("5").checked=o,document.getElementById("6").checked=o,document.getElementById("7").checked=o,document.getElementById("8").checked=o):document.getElementById(t).checked=o;for(var c=0,n=0;n<9;n++){const e=n.toString(),t=document.getElementById(e);t&&(c|=t.checked?1<<n:0)}F(c),console.log("Filter: "+c.toString())}Object(c.useEffect)((function(){!async function(){e.doc.isOpen()?ce():e.doc.setCallback(ce),e.doc.serverAvailable&&o.e(0).then(o.t.bind(null,408,7)),console.log("BOOK ID: "+X)}()}),[]),Object(c.useEffect)((()=>{console.log("Updated id: "+X),X?(console.log("Set Book ID "+X),I(X),G()):I("")}),[X,G]),Object(c.useEffect)((()=>{!async function(){var t;if(console.log("Refresh"),!C)if(t=""!==y?y:V,console.log(t),t){let o=await async function(t){let o=[];if(e.doc.serverAvailable){console.log(f(t)),console.log(btoa(f(t)));const c="https://"+e.doc.serverInfo.localIp+":"+e.doc.serverInfo.port+"/book";console.log("======================="),console.log("Request book list");const n={book:btoa(f(t)),match:!1},s=await e.doc.requestGet(c,n);if(console.log(s),!("books"in s.data.return))return o;const l=s.data.return.books;for(let t=0;t<l.length;t++){const c=l[t],n="".concat(c.BOOKNAME," ").concat(c.CLAIMNUM),s=c._STATE;let i="";1!==s&&3!==s&&"1"!==s&&"3"!==s||(i=e.text.returnDate+" "+c._RETURN);let a={index:t,text:n,name:c.BOOKNAME,code:c.BARCODE,rent:O(e.text,c._STATE.toString()),retDate:i,regDate:c.REG_DATE,author:c.AUTHOR,totalName:c.TOTAL_NAME,claim_num:c.CLAIMNUM,publish:c.PUBLISH,claim:c.CLAIM,state:c._STATE,isbn:c.ISBN};o.push(a)}}else o=ae(t,b);return o.sort(g),o}(t);o.length>0?l(o):l([]),1===o.length&&(W.current=o[0].code)}else l([])}()}),[V,y,b,h,e,E,C]),Object(c.useEffect)((()=>{if(console.log("History update"),console.log(Q),!Q)return z([]),void(J.current=!1);let e=[];for(let t=0;t<Q.rentLog.length;t++){const o=Q.rentLog[t];if(1!==o.book_state)continue;let c=[o.timestamp];c.push(o.return_date),e.push(c)}console.log(e.length),z(e),J.current=e.length>0}),[Q]);const le=(t,o)=>{const c=t.code!==W.current,n=c?"searchResult":"selectedSearchResult",l=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1];l[t.state]=!0,1!==t.state&&2!==t.state&&3!==t.state||(l[0]=!0);const r=o[2];return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{id:n,onClick:async()=>await(async e=>{console.log("Prev "+W.current),1===s.length||-1===W.current||W.current!==e?(console.log("Select "+e),d(e),W.current=e):(console.log("Deselect "+e),d(-1),W.current=-1)})(t.code),children:Object(a.jsx)("table",{children:Object(a.jsx)("tbody",{children:Object(a.jsxs)("tr",{className:"searchTr",children:[Object(a.jsx)("td",{className:"searchTitle",children:t.text}),Object(a.jsx)("td",{className:"searchRent",children:t.rent})]})})})}),!c&&Object(a.jsxs)("div",{children:[Object(a.jsx)("table",{children:Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsxs)("td",{children:[t.author," "]}),Object(a.jsxs)("td",{colSpan:"2",rowSpan:"2",children:[t.totalName+" ",Object(a.jsx)("b",{children:t.name})," "+t.claim_num]})]},"row1"),Object(a.jsx)("tr",{children:Object(a.jsx)("td",{children:Object(a.jsx)(i.b,{to:"/search/"+t.code,children:t.code})})},"row2"),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:t.publish}),Object(a.jsx)("td",{colSpan:t.retDate.length>0?"1":"2",children:t.claim}),t.retDate.length>0&&Object(a.jsx)("td",{children:t.retDate})]},"row3")]})}),Object(a.jsx)("table",{className:"rentHistory",hidden:!J.current,children:Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{id:"titles",children:[Object(a.jsx)("td",{children:e.text.rentDate}),Object(a.jsx)("td",{children:e.text.returnDate})]}),r.map((e=>(e=>Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:e[0]},e[0]+"x"),Object(a.jsx)("td",{children:e[1]})]},e[0]))(e)))]})}),Object(a.jsxs)("div",{hidden:!e.doc.serverAvailable||!e.doc.admin,children:[Object(a.jsxs)("button",{className:"bookStates",id:"0",disabled:l[0],onClick:()=>ne(0),children:[" ",e.text.available," "]}),Object(a.jsxs)("button",{className:"bookStates",id:"4",disabled:l[4],onClick:()=>ne(4),children:[" ",e.text.lost," "]}),Object(a.jsxs)("button",{className:"bookStates",id:"5",disabled:l[5],onClick:()=>ne(5),children:[" ",e.text.damaged," "]}),Object(a.jsxs)("button",{className:"bookStates",id:"6",disabled:l[6],onClick:()=>ne(6),children:[" ",e.text.given," "]}),Object(a.jsxs)("button",{className:"bookStates",id:"7",disabled:l[7],onClick:()=>ne(7),children:[" ",e.text.notAvailable," "]}),Object(a.jsxs)("button",{className:"bookStates",id:"8",disabled:l[8],onClick:()=>ne(8),children:[" ",e.text.deleted," "]})]}),Object(a.jsxs)("div",{id:"checkRent",hidden:!Z.current,children:[Object(a.jsxs)("div",{id:"bookName",children:[" ",O(e.text,$.current)," "]}),Object(a.jsxs)("button",{id:"confirm",onClick:()=>async function(){console.log("Confirmed"),Z.current=!1,S(!1);const t=e.doc.serverInfo.localIp,o=e.doc.serverInfo.port;if(0===t.length||o<=0)return;const c="https://"+t+":"+o+"/book";var n={};n.book=W.current,n.state=$.current,console.log("======================="),console.log("Change book state"),await e.doc.requestPost(c,n),N(!E)}(),children:[" ",e.text.confirm," "]}),Object(a.jsxs)("button",{id:"cancel",onClick:()=>(console.log("Cancelled"),Z.current=!1,void S(!1)),children:[" ",e.text.cancel," "]})]})]})]},t.code)};function ie(e,t){e?T(t):B(t)}function ae(t,o){let c=[];console.log(C);const n=t.toLowerCase();console.log(n);for(let s=0;s<o.length;s++){const t=o[s];if(c.length>=500)break;if(n.length>0&&(!t.name||!t.name.toString().toLowerCase().includes(n))&&(!t.totalName||!t.totalName.toString().toLowerCase().includes(n))&&(!t.author||!t.author.toString().toLowerCase().includes(n))&&t.code.toLowerCase()!==n&&t.isbn!==n)continue;if(t.deleted&&"Y"===t.deleted)continue;if(C){if(R.length>0&&t.author&&!t.author.toString().toLowerCase().includes(R.toLowerCase()))continue;if(D.length>0&&t.code<D)continue;if(L.length>0&&t.code>L)continue;const e=t.regDate;if(e<w||e>M)continue;if(console.log(t),console.log(e),console.log(e<w),console.log(e>M),!(1<<t.state&q))continue}else if(0===n.length)continue;let l="".concat(t.name," ").concat(t.claim_num),i="",a="0";for(const o of h)if(o.code===t.code){a=o.state,"1"!==a&&"3"!==a||(i=e.text.returnDate+" "+o.retDate);break}let r={index:s,text:l,name:t.name,code:t.code.toString(),rent:O(e.text,a),retDate:i,regDate:t.regDate,author:t.author,totalName:t.totalName,claim_num:t.claim_num,publish:t.publish,claim:t.claim,state:parseInt(a),isbn:t.isbn};c.push(r)}return console.log(c.length),c}return Object(a.jsxs)("div",{id:"search",children:[Object(a.jsx)("div",{id:"title",children:Object(a.jsxs)("h2",{children:[" ",e.text.bookSearch," "]})}),Object(a.jsxs)("div",{id:"searchContents",hidden:""!==y,children:[Object(a.jsx)("input",{id:"searchInput",placeholder:e.text.searchBook,value:t,onChange:e=>{n(e.target.value)}}),Object(a.jsxs)("div",{hidden:!e.doc.admin,children:[Object(a.jsx)("input",{type:"checkbox",id:"advancedSearch",checked:C,onChange:()=>{_(!C)}}),Object(a.jsx)("label",{children:e.text.advSearch})]}),Object(a.jsxs)("div",{hidden:!C,children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)("label",{children:[" ",e.text.author," "]}),Object(a.jsx)("input",{type:"text",id:"author",onChange:e=>{A(e.target.value)}})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("label",{children:[" ",e.text.bookCode," "]}),Object(a.jsx)("input",{type:"text",id:"fromPeriod",onChange:e=>{ie(!0,e.target.value)}}),Object(a.jsx)("label",{children:" ~  "}),Object(a.jsx)("input",{type:"text",id:"toPeriod",onChange:e=>{ie(!1,e.target.value)}})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("label",{children:[" ",e.text.registeredDate," "]}),Object(a.jsx)(te.a,{onChange:function(e){console.log(e);const t=e[0],o=e[1],c=t.getFullYear().toString()+"-"+(t.getMonth()+1).toString().padStart(2,"0")+"-"+t.getDate().toString().padStart(2,"0");console.log(c),U(c);const n=o.getFullYear().toString()+"-"+(o.getMonth()+1).toString().padStart(2,"0")+"-"+o.getDate().toString().padStart(2,"0");console.log(n),H(n)},selectRange:!0})]}),Object(a.jsx)("div",{children:Object(a.jsx)("table",{children:Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{className:"bookData",children:[Object(a.jsx)("td",{className:"stateName",children:e.text.all}),Object(a.jsx)("td",{className:"stateName",children:e.text.available}),Object(a.jsx)("td",{className:"stateName",children:e.text.checkedOut}),Object(a.jsx)("td",{className:"stateName",children:e.text.overDue}),Object(a.jsx)("td",{className:"stateName",children:e.text.lost}),Object(a.jsx)("td",{className:"stateName",children:e.text.damaged}),Object(a.jsx)("td",{className:"stateName",children:e.text.given}),Object(a.jsx)("td",{className:"stateName",children:e.text.notAvailable}),Object(a.jsx)("td",{className:"stateName",children:e.text.deleted})]},"stateName"),Object(a.jsxs)("tr",{className:"bookData",children:[Object(a.jsx)("td",{className:"stateButton",children:Object(a.jsx)("input",{type:"checkbox",className:"bookStates",id:"1023",onChange:()=>se(1023)})}),Object(a.jsx)("td",{className:"stateButton",children:Object(a.jsx)("input",{type:"checkbox",className:"bookStates",id:"0",onChange:()=>se(0)})}),Object(a.jsx)("td",{className:"stateButton",children:Object(a.jsx)("input",{type:"checkbox",className:"bookStates",id:"1",onChange:()=>se(1)})}),Object(a.jsx)("td",{className:"stateButton",children:Object(a.jsx)("input",{type:"checkbox",className:"bookStates",id:"3",onChange:()=>se(3)})}),Object(a.jsx)("td",{className:"stateButton",children:Object(a.jsx)("input",{type:"checkbox",className:"bookStates",id:"4",onChange:()=>se(4)})}),Object(a.jsx)("td",{className:"stateButton",children:Object(a.jsx)("input",{type:"checkbox",className:"bookStates",id:"5",onChange:()=>se(5)})}),Object(a.jsx)("td",{className:"stateButton",children:Object(a.jsx)("input",{type:"checkbox",className:"bookStates",id:"6",onChange:()=>se(6)})}),Object(a.jsx)("td",{className:"stateButton",children:Object(a.jsx)("input",{type:"checkbox",className:"bookStates",id:"7",onChange:()=>se(7)})}),Object(a.jsx)("td",{className:"stateButton",children:Object(a.jsx)("input",{type:"checkbox",className:"bookStates",id:"8",onChange:()=>se(8)})})]},"stateButton")]})})}),Object(a.jsx)("div",{children:Object(a.jsxs)("button",{id:"searchEntry",onClick:function(){console.log("Search"),console.log(D),console.log(L),console.log(w),console.log(M);let e=ae(t,b);e.sort(g);let o=e;o.length>0?l(o):l([]),1===o.length&&(W.current=o[0].code)},children:[" ",e.text.search," "]})})]})]}),Object(a.jsx)(P,{keyValue:V,list:s,detail:[r,v,K],showCallback:(e,t)=>function(e,t){return console.log("Redraw "+Z.current),console.log(J.current),console.log(t),e.map((e=>le(e,t)))}(e,t)})]})},ne=o(12);const se=0,le=1,ie=2;var ae=function(e){const[t,s]=Object(c.useState)(""),[l,r]=Object(c.useState)(""),[d,b]=Object(c.useState)([]),[h,O]=Object(c.useState)(!1),[g,x]=Object(c.useState)(""),[f,p]=Object(c.useState)(se),[S,E]=Object(c.useState)([]),[N,y]=Object(c.useState)(!1),[I,{data:C}]=Object(u.a)(V,{variables:{_id:g}}),[_,{data:R}]=Object(u.a)(G,{variables:{user_id:g}}),[A,{data:D}]=Object(u.a)(J,{variables:{user_id:g}}),[T,L]=Object(c.useState)(""),[B,w]=Object(c.useState)("");async function U(){if(console.log("All data loaded "+h),e.doc.logged){p(ie);const t=e.doc.userInfo._id;x(t),b(await e.doc.getRent(t)),await _(),await A()}else p(se),x(""),r("");console.log("Set title "+e.doc.logged),e.doc.logged?e.doc.adminMode?w(e.text.userSearch):w(e.text.checkOut):w(e.text.logIn),console.log("Done"),O(!0)}Object(c.useEffect)((function(){!async function(){if(!e.doc.initialized)return;if(e.doc.isOpen()&&U(),console.log("======================================="),console.log("CheckOutStatus initialize"),e.doc.serverAvailable&&o.e(0).then(o.t.bind(null,408,7)),"autoLogin"in e.context.cookie){const t="true"===e.context.cookie.autoLogin;y(t)}const t=new Date;t.setTime(t.getTime()+1728e5),L(t.toGMTString())}()}),[]),Object(c.useEffect)((()=>{console.log("User data updated "),U()}),[e.doc.logged]),Object(c.useEffect)((()=>{!async function(){console.log("User data updated "),await q()}()}),[C]),Object(c.useEffect)((()=>{if(!R||!e.doc.bookReady||!e.doc.rentReady)return;console.log("History updated ");let t=[];const o=R.rentLog;for(let c=0;c<o.length;c++){const n=o[c];if("1"!==n.book_state&&1!==n.book_state)continue;if(!("return_date"in n)||!n.return_date)continue;const s=n.book_id;if(!(s in e.doc.book))continue;const l=e.doc.book[s],i=l.title,a=l.claim,r=n.timestamp.split(" ")[0].replace("-","/",2).replace("-","/"),d=n.return_date.split(" ")[0].replace("-","/",2).replace("-","/");t.push({id:s,title:i,rentDate:r,retDate:d,claim:a,totalName:l.series,claim_num:l.claim_num})}t.sort(m),console.log("Set history"),E(t)}),[R,e.doc.bookReady,e.doc.rentReady]),Object(c.useEffect)((()=>{console.log("Request data"),console.log(D)}),[D]);const M=(t,o)=>{let c;return c=o?e.text.returnDate:e.text.dueDate,Object(a.jsx)("div",{children:Object(a.jsx)("table",{children:Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{id:"id",children:e.text.id}),Object(a.jsx)("th",{id:"rentDate",children:e.text.rentDate}),Object(a.jsx)("th",{id:"returnDate",children:c})]},"ID"),t.map(((t,c)=>((t,o,c)=>{const s=t.id,l=t.rentDate,r=t.retDate,d=t.claim,u=o.toString();let b;return b=c?"1":"2",Object(a.jsxs)(n.a.Fragment,{children:[Object(a.jsxs)("tr",{className:"bookData",children:[Object(a.jsx)("td",{className:"bookData",children:Object(a.jsx)(i.b,{to:"/search/"+s,children:s})}),Object(a.jsx)("td",{className:"bookData",children:l}),Object(a.jsx)("td",{className:"bookData",children:r})]},u),Object(a.jsxs)("tr",{className:"bookName",children:[Object(a.jsx)("td",{className:"bookName",children:d}),Object(a.jsxs)("td",{colSpan:"2",rowSpan:b,className:"bookName",children:[t.totalName+" ",Object(a.jsx)("b",{children:t.title})," "+t.claim_num]})]},u+"Title"),!c&&Object(a.jsx)("tr",{className:"bookExtend",children:Object(a.jsxs)("td",{className:"bookExtend",children:[" ",Object(a.jsx)("button",{id:"extend",onClick:async()=>H(),disabled:!0,children:e.text.extend})]})},u+"Extend")]},u+"Fragment")})(t,c,o))),0===t.length&&Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:"3",children:e.text.noEntry})},"None")]})})})},H=async()=>{console.log("Extend")},q=async()=>{if(!C||f===se)return;console.log(ne.c.isActive(v));const t=j;let o;console.log(l);const c=C.user[0];e.context.checkLogIn(c,l)?(e.doc.logIn(c),b(await e.doc.getRent(g)),p(ie),t.type=ne.c.TYPE.SUCCESS,o=e.text.logInSucceed,document.cookie="user_id="+g+"; expires="+T+";"):(t.type=ne.c.TYPE.ERROR,o=e.text.logInFail),t.render=o,t.autoClose=3e3,t.toastId=v,ne.c.isActive(v)?(console.log("update toast"),ne.c.update(v,t)):(console.log("New toast"),ne.c.info(o,t))};return e.doc.initialized?Object(a.jsxs)("div",{id:"checkOut",children:[Object(a.jsx)("div",{id:"title",children:Object(a.jsx)("h2",{children:B})}),Object(a.jsxs)("div",{id:"checkOutInput",hidden:!(f!==ie),children:[Object(a.jsx)("input",{type:"text",id:"searchInput",placeholder:e.text.idHolder,value:t,disabled:!h,onInput:e=>{s(e.target.value)}}),Object(a.jsx)("input",{type:"password",id:"searchPassword",placeholder:e.text.pwHolder,value:l,disabled:!h,onInput:e=>{r(e.target.value)}}),Object(a.jsxs)("div",{id:"autoLogin",children:[Object(a.jsx)("input",{type:"checkbox",id:"autoLoginButton",checked:N,onChange:()=>(()=>{console.log("Toggle autoLogin");const e="autoLogin="+(N?"false":"true")+"; expires="+T+";";document.cookie=e,y(!N)})()}),Object(a.jsx)("label",{children:e.text.autoLogin})]}),Object(a.jsxs)("button",{id:"logIn",onClick:async()=>(async()=>{p(le),x(t.toUpperCase()),await I(),await _(),await A(),console.log("Log In"),await q()})(),children:[" ",e.text.logIn," "]})]}),Object(a.jsxs)("div",{id:"checkOutResult",hidden:!(f===ie),children:[Object(a.jsx)("div",{children:M(d,!1)}),Object(a.jsx)("div",{id:"name",children:e.text.history}),Object(a.jsx)(P,{list:S,showCallback:e=>M(e,!0)})]})]}):Object(a.jsx)(k.a,{to:"/"})};const re=0,de=1,ue=2;var be=function(e){const[t,n]=Object(c.useState)(""),[s,l]=Object(c.useState)(""),[i]=Object(ee.a)(s,500),[r,d]=Object(c.useState)(""),[u,b]=Object(c.useState)(!1),[O,g]=Object(c.useState)(""),[x,m]=Object(c.useState)({}),[f,S]=Object(c.useState)([]),[E,N]=Object(c.useState)({}),[y,I]=Object(c.useState)({}),[C,_]=Object(c.useState)(re),{id:R}=Object(k.r)(),A=Object(k.p)();Object(c.useEffect)((function(){const t=setInterval((async()=>{if(!("localIp"in e.doc.serverInfo)||!("port"in e.doc.serverInfo))return;if(e.doc.admin)return;o.e(0).then(o.t.bind(null,408,7));const t=e.doc.serverInfo.localIp,c=e.doc.serverInfo.port;if(t.length>0&&c>0){const o="https://"+t+":"+c+"/scanBarcode",n=(await e.doc.requestGet(o,{})).data.scan;n&&(console.log(n),console.log(C),g(n))}}),1e3);return async function(){console.log("======================================="),console.log("CheckOut initialize");const e=document.getElementsByName("idPrefix");for(var t=0;t<e.length;t++){const o=e[t].id;e[t].checked="AB"===o}console.log("ID: "+R),R&&0!==R.length&&(n(R),T(R))}(),()=>clearInterval(t)}),[]),Object(c.useEffect)((()=>{console.log("Updated id: "+R)}),[R]),Object(c.useEffect)((()=>{O&&(console.log("Updated barcode: "+O),console.log("state : "+C),C===ue?d(O):C===re&&T(O))}),[O]),Object(c.useEffect)((()=>{console.log("User data updated "),console.log(ne.c.isActive(v));const t=j;let o,c=!1;"USER_CODE"in E&&C!==ue?(console.log("Set state to LoggedIn from "+C),_(ue),t.type=ne.c.TYPE.SUCCESS,o=e.text.logInSucceed,c=!0):"USER_CODE"in E||(console.log("Set state to LoggedOut from "+C),C===de&&(t.type=ne.c.TYPE.ERROR,o=e.text.logInFail,c=!0),_(re)),c&&m({id:p,text:o,type:t.type})}),[E]),Object(c.useEffect)((()=>{console.log("book updated "),"BARCODE"in y?0===y._STATE?b(!0):(m({id:p,text:e.text.RENTED,type:ne.c.TYPE.ERROR}),b(!1)):(b(!1),d(""))}),[y]),Object(c.useEffect)((()=>{if(!("text"in x))return;ne.c.dismiss(),console.log("Notification "+x.text);const e=j;e.type=x.type,e.autoClose=3e3,ne.c.info(x.text,e)}),[x]);const D=async t=>{const o="https://"+e.doc.serverInfo.localIp+":"+e.doc.serverInfo.port+"/user?user="+t,c={user:t,data:"nothing"},s=(await e.doc.requestGet(o,c)).data.return;N(s),console.log(s),n(s.USER_CODE)},T=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;var t,o,c="";const n=document.getElementsByName("idPrefix");if(e){if(e.length<=2)return;c=e.substring(0,2);var s=!1;for(o=0;o<n.length;o++)if(c===n[o].id){s=!0;break}if(!s)return;t=e}else{const e=document.getElementById("userInput").value;for(o=0;o<n.length;o++)n[o].checked&&(c=n[o].id),console.log("Pressed ["+o.toString()+" "+c+"]");t="A"===e[0]||"a"===e[0]?e:c+e}if(console.log("LOGIN"),console.log(t),0===t.length)return;console.log("Set state to LoggingIn from "+C),_(de);const l=t.toUpperCase();D(l)};function L(t){return Object(a.jsxs)("div",{id:"bookList",children:[Object(a.jsxs)("div",{id:"dueDate",children:[e.text.dueDate," : ",e.doc.dueDate]}),t.map(((e,t)=>function(e,t){return Object(a.jsxs)("div",{id:"bookEntry",children:[Object(a.jsxs)("div",{id:"bookItem",children:[" ",t.id," "]}),Object(a.jsxs)("div",{id:"bookItem",children:[" ",t.name," "]})]},t.id)}(0,e)))]})}return Object(c.useEffect)((()=>{!async function(){if(i.length<=0)return;var t;t=e.doc.admin?i:"HK"+i,console.log("Search book1 "+t);const o="https://"+e.doc.serverInfo.localIp+":"+e.doc.serverInfo.port+"/book",c={book:t,match:!0},n=(await e.doc.requestGet(o,c)).data.return;console.log(n),"books"in n&&"BOOKNAME"in n.books&&(console.log(n.books),I(n.books))}()}),[i,e.doc]),Object(c.useEffect)((()=>{!async function(){if(console.log("Set bookId: "+r),0===r.length)return;console.log("Search book2 "+r);const t="https://"+e.doc.serverInfo.localIp+":"+e.doc.serverInfo.port+"/book",o={book:r,match:!0},c=(await e.doc.requestGet(t,o)).data.return;console.log(c),"books"in c&&"BOOKNAME"in c.books&&I(c.books)}()}),[r,e.doc]),Object(c.useEffect)((()=>{!async function(){if(console.log("Set userId: "+t),t&&0!==t.length&&(0===t.search("AA")||0===t.search("AB"))){const o=document.getElementsByName("idPrefix"),c=t.substring(0,2);for(var e=0;e<o.length;e++){const t=o[e].id;o[e].checked=c===t}}}()}),[t]),Object(a.jsxs)("div",{id:"checkOut",children:[Object(a.jsx)("div",{id:"title",children:Object(a.jsx)("h2",{children:e.text.checkOut})}),Object(a.jsxs)("div",{id:"checkOutInput",hidden:C===ue,children:[Object(a.jsx)("input",{type:"radio",id:"AA",name:"idPrefix"}),Object(a.jsx)("label",{htmlFor:"AA",className:"idPrefix",name:"idPrefix",children:" AA "}),Object(a.jsx)("input",{type:"radio",id:"AB",name:"idPrefix"}),Object(a.jsx)("label",{htmlFor:"AB",className:"idPrefix",name:"idPrefix",children:" AB "}),Object(a.jsx)("input",{type:"text",id:"userInput",pattern:"[0-9]*",inputMode:"numeric",placeholder:e.text.idHolder,onKeyDown:e=>{!function(e){"Enter"===e.key&&(console.log(e),console.log(document.getElementById("userInput").value),T())}(e)}}),Object(a.jsxs)("button",{id:"logIn",onClick:async()=>T(),children:[" ",e.text.logIn," "]})]}),Object(a.jsxs)("div",{id:"checkOutResult",hidden:C!==ue,children:[E.USER_CODE&&Object(a.jsxs)("div",{id:"userInfo",children:[Object(a.jsx)("div",{id:"userItem",children:E.USER_CODE+" : "+E.USER_NAME+e.text.nameSuffix}),Object(a.jsxs)("div",{id:"userItem",children:[" ",h(e.text,E.USER_STATE)," "]}),Object(a.jsxs)("div",{id:"userItem",children:[" ",E._RENT.length+" "+e.text.rentSuffix," "]})]}),Object(a.jsx)("div",{id:"bookInput",hidden:u,children:Object(a.jsxs)("label",{id:"manualInput",children:[Object(a.jsx)("div",{id:"hkPrefix",children:e.text.numberOnly}),Object(a.jsx)("input",{inputMode:"numeric",pattern:"[0-9]*",type:"text",id:"bookInput",placeholder:e.text.bookHolder,onInput:e=>{l(e.target.value)}})]})}),Object(a.jsxs)("div",{id:"checkRent",hidden:!u,children:[Object(a.jsxs)("div",{id:"bookName",children:[" ",e.text.confirmRent," "]}),Object(a.jsxs)("div",{id:"bookName",children:[" ",y.AUTHOR+":"," "]}),Object(a.jsxs)("div",{id:"bookName",children:[" ",y.BOOKNAME," "]}),Object(a.jsxs)("button",{id:"confirm",onClick:async()=>async function(){console.log("Confirmed"),b(!1),console.log(y);const o="https://"+e.doc.serverInfo.localIp+":"+e.doc.serverInfo.port+"/checkOut",c={book:y.BARCODE,user:t},n=(await e.doc.requestPost(o,c)).data.return;if(console.log("Rent confirmed"),console.log(n),"SUCCESS"===n)m({id:p,text:e.text.rentSucceed,type:ne.c.TYPE.SUCCESS}),f.push({id:y.BARCODE,name:y.BOOKNAME}),console.log(f),S(f);else{let t;t=n in e.text?e.text[n]:e.text.NOT_AVAILABLE,console.log(t),m({id:p,text:t,type:ne.c.TYPE.ERROR})}I({}),d(""),D(t)}(),children:[" ",e.text.confirm," "]}),Object(a.jsxs)("button",{id:"cancel",onClick:()=>(console.log("Cancelled"),b(!1),I({}),void d("")),children:[" ",e.text.cancel," "]})]}),f.length>0&&Object(a.jsx)(P,{list:f,showCallback:e=>L(e)})]}),Object(a.jsxs)("button",{id:"logOutButton",onClick:()=>(async()=>{console.log("Finish"),N({}),I({}),n(""),d(""),S([]),A("/")})(),children:[" ",e.text.finish," "]})]})},je=o(197),he=o.n(je);var Oe=function(e){const[t,n]=Object(c.useState)(""),[s]=Object(ee.a)(t,300),[l,i]=Object(c.useState)({}),[r,d]=Object(c.useState)(!1),[u,b]=Object(c.useState)({}),[h,O]=Object(c.useState)(""),[g,x]=Object(c.useState)([]),m=Object(k.p)();function f(e){return Object(a.jsx)("div",{id:"bookList",children:e.map(((e,t)=>function(e,t){return Object(a.jsxs)("div",{id:"bookEntry",children:[Object(a.jsxs)("div",{id:"bookItem",children:[" ",t.id," "]}),Object(a.jsxs)("div",{id:"bookItem",children:[" ",t.name," "]})]},t.id)}(0,e)))})}return Object(c.useEffect)((function(){const t=setInterval((async()=>{if(!("localIp"in e.doc.serverInfo)||!("port"in e.doc.serverInfo))return;if(e.doc.admin)return;o.e(0).then(o.t.bind(null,408,7));const t=e.doc.serverInfo.localIp,c=e.doc.serverInfo.port;if(t&&t.length>0&&c>0){const o="https://"+t+":"+c+"/scanBarcode",n=(await e.doc.requestGet(o,{})).data.scan;n&&(console.log(n.search("HK")),0===n.search("HK")&&(console.log(h+" -> "+n),O(n)))}}),1e3);return async function(){e.doc.setCallback(void 0),console.log("======================================="),console.log("Return initialize")}(),()=>clearInterval(t)}),[]),Object(c.useEffect)((()=>{!async function(){if(t.length>0){var o;o=e.doc.admin?t:"HK"+t,console.log("Search book1 "+o);const c="https://"+e.doc.serverInfo.localIp+":"+e.doc.serverInfo.port+"/book",n={book:o,match:!0},s=(await e.doc.requestGet(c,n)).data.return;"books"in s&&"BOOKNAME"in s.books&&i(s.books)}}()}),[s,e.doc,t]),Object(c.useEffect)((()=>{!async function(){if(console.log("B"+h),h.length>0){const t=h;console.log("Search book2 "+t);const o="https://"+e.doc.serverInfo.localIp+":"+e.doc.serverInfo.port+"/book",c={book:t,match:!0},n=(await e.doc.requestGet(o,c)).data.return;console.log(n),"books"in n&&"BOOKNAME"in n.books&&i(n.books)}}()}),[h,e.doc]),Object(c.useEffect)((()=>{console.log("book updated "),"BARCODE"in l?1===l._STATE||3===l._STATE?d(!0):(console.log("Not rented"),b({id:p,text:e.text.NOT_RENTED,type:ne.c.TYPE.ERROR}),document.getElementById("barcodeScan").value=null,d(!1),O("")):d(!1)}),[l]),Object(c.useEffect)((()=>{if(!("text"in u))return;ne.c.dismiss();const e=j;e.type=u.type,e.autoClose=3e3,ne.c.info(u.text,e)}),[u]),Object(c.useEffect)((()=>{if(console.log("Returned updated"),console.log(g),!("localIp"in e.doc.serverInfo)||!("port"in e.doc.serverInfo))return;console.log("Update return list");const o="HK"+t;console.log("Search book1 "+o);const c="https://"+e.doc.serverInfo.localIp+":"+e.doc.serverInfo.port+"/book",n={books:g};e.doc.requestGet(c,n)}),[g,t,e.doc]),Object(a.jsxs)("div",{id:"checkOut",children:[Object(a.jsx)("div",{id:"title",children:Object(a.jsx)("h2",{children:e.text.return})}),Object(a.jsxs)("div",{id:"checkOutResult",children:[Object(a.jsxs)("div",{id:"bookInput",hidden:r,children:[Object(a.jsxs)("label",{id:"barcodeScan",hidden:!0,children:[Object(a.jsx)(he.a,{fontSize:"large",sx:{color:"#404040"}}),Object(a.jsx)("span",{})]}),Object(a.jsxs)("label",{id:"manualInput",children:[Object(a.jsx)("div",{id:"hkPrefix",children:e.text.numberOnly}),Object(a.jsx)("input",{inputMode:"numeric",pattern:"\\d*",type:"text",id:"searchInput",placeholder:e.text.bookHolder,onInput:e=>{n(e.target.value)}})]})]}),Object(a.jsxs)("div",{id:"checkReturn",hidden:!r,children:[Object(a.jsxs)("div",{id:"bookName",children:[" ",e.text.confirmReturn," "]}),Object(a.jsxs)("div",{id:"bookName",children:[" ",l.AUTHOR+":"," "]}),Object(a.jsxs)("div",{id:"bookName",children:[" ",l.BOOKNAME," "]}),Object(a.jsxs)("button",{id:"confirm",onClick:()=>async function(){console.log("Confirmed"),d(!1),console.log(l);const t="https://"+e.doc.serverInfo.localIp+":"+e.doc.serverInfo.port+"/return",o={book:l.BARCODE},c=(await e.doc.requestPost(t,o)).data.return;if(console.log(c),"SUCCESS"===c)b({id:p,text:e.text.returnSucceed,type:ne.c.TYPE.SUCCESS}),g.push({id:l.BARCODE,name:l.BOOKNAME}),console.log(g),x(g);else{let t;t=c in e.text?e.text[c]:e.text.NOT_AVAILABLE,console.log(t),b({id:p,text:t,type:ne.c.TYPE.ERROR})}i({}),O("")}(),children:[" ",e.text.confirm," "]}),Object(a.jsxs)("button",{id:"cancel",onClick:()=>(console.log("Cancelled"),d(!1),i({}),void O("")),children:[" ",e.text.cancel," "]})]}),g.length>0&&Object(a.jsx)(P,{list:g,showCallback:e=>f(e)})]}),Object(a.jsxs)("button",{id:"logOutButton",onClick:()=>(async()=>{console.log("Finish"),m("/")})(),children:[" ",e.text.finish," "]})]})};o(229);var ge=function(e){const[t,o]=Object(c.useState)(!1),[n,s]=Object(c.useState)(!0),[l,i]=Object(c.useState)({});function r(e,t){console.log(e),console.log(t);var o=l;switch(e){case 0:o.USER_NAME=t;break;case 1:o.PHONE_NUMBER=t;break;case 2:o.EMAIL=t;break;case 3:o.ADDRESS=t;break;case 4:o.USER_LEVEL=t;break;case 5:o.NOTICE=t}const c=Object.keys(o).length;console.log(c),c>1&&s(!1),i(o)}return Object(c.useEffect)((function(){console.log("User Info"),console.log(e.info),document.getElementById("userName").value=e.info.USER_NAME?e.info.USER_NAME:"",document.getElementById("phone").value=e.info.PHONE_NUMBER?e.info.PHONE_NUMBER:"",document.getElementById("email").value=e.info.EMAIL?e.info.EMAIL:"",document.getElementById("address").value=e.info.ADDRESS?e.info.ADDRESS:"",document.getElementById("notice_").value=e.info.NOTICE?e.info.NOTICE:"",document.getElementById("user_level").value=e.info.USER_LEVEL,i({USER_CODE:e.info.USER_CODE}),s(!0)}),[e.info]),Object(a.jsxs)("div",{children:[Object(a.jsx)("table",{children:Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsxs)("td",{children:[" ",e.text.name," "]}),Object(a.jsx)("td",{colSpan:"3",children:Object(a.jsx)("input",{type:"text",className:"input",id:"userName",onChange:e=>{r(0,e.target.value)}})})]},"Name"),"REG_DATE"in e.info&&Object(a.jsxs)("tr",{children:[Object(a.jsxs)("td",{children:[" ",e.text.registeredDate," "]}),Object(a.jsx)("td",{colSpan:"3",className:"data",children:e.info.REG_DATE})]},"Register"),Object(a.jsxs)("tr",{children:[Object(a.jsxs)("td",{children:[" ",e.text.phone," "]}),Object(a.jsx)("td",{colSpan:"3",children:Object(a.jsx)("input",{type:"text",className:"input",id:"phone",onChange:e=>{r(1,e.target.value)}})})]},"Phone"),Object(a.jsxs)("tr",{children:[Object(a.jsxs)("td",{children:[" ",e.text.email," "]}),Object(a.jsx)("td",{colSpan:"3",children:Object(a.jsx)("input",{type:"text",className:"input",id:"email",onChange:e=>{r(2,e.target.value)}})})]},"Email"),Object(a.jsxs)("tr",{children:[Object(a.jsxs)("td",{children:[" ",e.text.address," "]}),Object(a.jsx)("td",{colSpan:"3",children:Object(a.jsx)("input",{type:"text",className:"input",id:"address",onChange:e=>{r(3,e.target.value)}})})]},"Address"),Object(a.jsxs)("tr",{children:[Object(a.jsxs)("td",{children:[" ",e.text.notice_," "]}),Object(a.jsx)("td",{colSpan:"3",children:Object(a.jsx)("input",{type:"text",className:"input",id:"notice_",onChange:e=>{r(5,e.target.value)}})})]},"Notice"),Object(a.jsxs)("tr",{children:[Object(a.jsxs)("td",{children:[" ",e.text.level," "]}),Object(a.jsx)("td",{colSpan:"3",className:"cell",children:Object(a.jsxs)("select",{name:"User Level",id:"user_level",className:"dropdown",onChange:e=>{r(4,e.target.value)},children:[Object(a.jsxs)("option",{value:"0",children:[" ",e.text.kid," "]}),Object(a.jsxs)("option",{value:"1",children:[" ",e.text.adult," "]}),Object(a.jsxs)("option",{value:"2",children:[" ",e.text.admin," "]})]})})]},"Level")]})}),Object(a.jsxs)("button",{id:"modify",hidden:t,onClick:async()=>o(!0),disabled:n,children:[" ",e.text.save," "]}),Object(a.jsxs)("div",{id:"checkModify",hidden:!t,children:[Object(a.jsxs)("div",{id:"noticeMsg",children:[" ",e.text.confirmSave," "]}),Object(a.jsxs)("button",{id:"confirm",onClick:()=>async function(){console.log("Save modification"),console.log(l);const t=e.doc.serverInfo.localIp,c=e.doc.serverInfo.port;if(0===t.length||c<=0)return;const n="https://"+t+":"+c+"/user";var s={};console.log(l);for(const e in l)s[e]=btoa(f(l[e]));const i=await e.doc.requestPost(n,s);console.log(i),e.refresh(i),o(!1)}(),children:[" ",e.text.confirm," "]}),Object(a.jsxs)("button",{id:"cancel",onClick:()=>{o(!1)},children:[" ",e.text.cancel," "]})]})]})};var xe=function(e){const[t,s]=Object(c.useState)(""),[l]=Object(ee.a)(t,300),[r,d]=Object(c.useState)(!1),[b,O]=Object(c.useState)([]),[g,m]=Object(c.useState)(!1),[p,{loading:v,data:S,error:E}]=Object(u.a)(z),[N,y]=Object(c.useState)({}),I=Object(c.useRef)("0"),{id:C}=Object(k.r)(),[_,R]=Object(c.useState)([]),A=Object(k.p)();async function D(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(console.log("All data loaded "+g),t){const t=j;t.type=ne.c.TYPE.SUCCESS,t.render=e.text.succeededToOpen,t.autoClose=3e3,t.toastId="",ne.c.info(e.text.succeededToOpen,t)}console.log("Set title "+e.logged),console.log("Done"),m(!0)}function T(e){console.log("Refresh page "+r),console.log(e),d(!r)}Object(c.useEffect)((function(){!async function(){e.doc.initialized&&(e.doc.isOpen()?D(!1):e.doc.setCallback(D),console.log("======================================="),console.log("UserSearch initialize"),console.log("User ID: "+C),e.doc.serverAvailable?o.e(0).then(o.t.bind(null,408,7)):(console.log("Load users"),p()))}()}),[]),Object(c.useEffect)((()=>{console.log("Updated id: "+C),s(C||"")}),[C]),Object(c.useEffect)((()=>{console.log("User data updated "),D(!1)}),[e.logged]),Object(c.useEffect)((()=>{if(console.log("User list loaded"),console.log(E),console.log(v),S){const o=S.user;var t=[];console.log("User list available");for(let c=0;c<o.length;c++){const n=o[c],s={id:n._id,name:n.name,level:n.level,state:h(e.text,n.state)};t.push(s)}console.log(t),e.doc.setUser(t),console.log(e.doc.getUser()),y(e.doc.getUser())}}),[S,v,E,e]);const L=(t,o)=>{const c=t.id,s=t.rentDate,l=t.retDate,r=t.title,d=t.extendCount,u=o.toString();return Object(a.jsxs)(n.a.Fragment,{children:[Object(a.jsxs)("tr",{className:"bookData",children:[Object(a.jsx)("td",{className:"bookData",children:Object(a.jsx)(i.b,{to:"/search/"+c,children:c})}),Object(a.jsx)("td",{className:"bookData",children:s}),Object(a.jsx)("td",{className:"bookData",children:l})]},u),Object(a.jsxs)("tr",{className:"bookName",children:[Object(a.jsx)("td",{colSpan:e.doc.serverAvailable?"2":"3",className:"bookName",children:r}),e.doc.serverAvailable&&Object(a.jsx)("td",{className:"bookName",children:Object(a.jsx)("button",{className:"extend",onClick:()=>async function(t){console.log("Extend "+t);const o=e.doc.serverInfo.localIp,c=e.doc.serverInfo.port;if(0===o.length||c<=0)return;const n="https://"+o+":"+c+"/extend";var s={};s.book=t;const l=await e.doc.requestPost(n,s);if(console.log("Extended"),console.log(l),B(I.current,!0),"SUCCESS"===l.data.return){const t=j;t.type=ne.c.TYPE.SUCCESS,t.render=e.text.succeededToOpen,t.autoClose=3e3,t.toastId="",ne.c.info(e.text.extend,t)}}(c),children:e.text.extend+" ("+d.toString()+")"})})]},u+"Title")]},u+"Fragment")},B=async function(t){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const c=await e.doc.getRent(t);console.log(c),-1===I.current||I.current!==t||o?(console.log("Select "+t),I.current=t,console.log("Set Rent List"),console.log(c),R(c)):b.length>1&&(console.log("Deselect "+t),I.current=-1,R([]))},w=(t,o)=>Object(a.jsxs)("div",{children:[t.map(((e,t)=>((e,t,o)=>{const c=o.toString();return Object(a.jsxs)("div",{children:[Object(a.jsx)("table",{children:Object(a.jsx)("tbody",{children:Object(a.jsxs)("tr",{className:"searchTr",onClick:async()=>await B(e.id),children:[Object(a.jsx)("td",{className:"bookData",children:e.id}),Object(a.jsx)("td",{className:"bookData",children:e.name}),Object(a.jsx)("td",{className:"bookData",children:e.state}),Object(a.jsx)("td",{className:"bookData",children:e.rent})]},e.id)})}),e.id===I.current&&U(e,t)]},c)})(e,o,t))),0===t.length&&Object(a.jsx)("table",{children:Object(a.jsx)("tbody",{children:Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:"3",children:e.text.noEntry})},"None")})})]}),U=(t,o)=>(console.log("Detail"),console.log(t),Object(a.jsxs)(a.Fragment,{children:[e.doc.serverAvailable&&Object(a.jsxs)("div",{children:[Object(a.jsx)(ge,{text:e.text,doc:e.doc,info:t,refresh:T}),Object(a.jsxs)("button",{id:"modify",onClick:()=>A("/checkOut/"+t.USER_CODE),children:[" ",e.text.checkOut," "]})]}),Object(a.jsx)("table",{children:Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{id:"id",children:e.text.id}),Object(a.jsx)("th",{id:"rentDate",children:e.text.rentDate}),Object(a.jsx)("th",{id:"returnDate",children:e.text.dueDate})]},"ID"),o.map(((e,t)=>L(e,t))),0===o.length&&Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:"3",children:e.text.noEntry})},"None")]})})]}));return Object(c.useEffect)((()=>{!async function(){const o=t.trim();if(console.log("Query "+o+" "+l),o.length>0&&l){let t;if(e.doc.serverAvailable){console.log("from CLIB");const c="https://"+e.doc.serverInfo.localIp+":"+e.doc.serverInfo.port+"/users",n={user:btoa(f(o))},s=await e.doc.requestGet(c,n),l=s.data.return.data;if(console.log(s.data.return),t=[],l)for(const o of s.data.return.data){console.log(o);let c=o;c.id=o.USER_CODE,c.name=o.USER_NAME,c.state=h(e.text,o.USER_STATE),c.rent=o._RENT.length,t.push(c)}}else console.log("from DB"),t=await async function(e){let t=[];for(const o in N){const c=N[o];if(t.length>=500)break;(c.name&&c.name.toString().includes(e)||c.id.toLowerCase()===e.toLowerCase())&&t.push(c)}return t.sort(x),console.log(t),t}(l);t.length>0?O(t):O([]),1===t.length?B(t[0].id):B(0)}else O([])}()}),[l,e,N,r,t]),e.doc.initialized?Object(a.jsxs)("div",{id:"checkOut",children:[Object(a.jsx)("div",{id:"title",children:Object(a.jsx)("h2",{children:e.text.userSearch})}),Object(a.jsxs)("div",{id:"checkOutInput",hidden:!e.doc.admin,children:[Object(a.jsx)("input",{type:"text",id:"searchInput",placeholder:e.text.idHolder,value:t,onChange:e=>{s(e.target.value)}}),Object(a.jsx)("div",{children:Object(a.jsx)(P,{keyValue:l,list:b,detail:_,showCallback:(e,t)=>w(e,t)})})]})]}):Object(a.jsx)(k.a,{to:"/"})};var me=function(e){const[t,s]=Object(c.useState)([]),[l,r]=Object(c.useState)(!1),[d,{loading:b,data:j,error:g}]=Object(u.a)(z),[x,f]=Object(c.useState)({});async function p(){if(console.log("All data loaded "+l),e.doc.serverAvailable){let t=[];const o="https://"+e.doc.serverInfo.localIp+":"+e.doc.serverInfo.port+"/book",c={user:"*",match:!1},n=(await e.doc.requestGet(o,c)).data.return.books;for(let s=0;s<n.length;s++){const o=n[s],c="".concat(o.BOOKNAME," ").concat(o.CLAIMNUM),l=o._STATE;let i="";1!==l&&3!==l&&"1"!==l&&"3"!==l||(i=o.RETURN_DATE);let a={index:s,text:c,title:o.BOOKNAME,id:o.BARCODE,rent:O(e.text,o.STATS.toString()),rentDate:o.LENT_DATE,retDate:i,author:o.AUTHOR,totalName:o.TOTAL_NAME,claim_num:o.CLAMENUM,publish:o.PUBLISH,claim:o.CLAIM,user:o.USER,userName:o.USER_NAME};t.push(a)}t.sort(m),s(t)}else{const t=await e.doc.getRent();console.log("Rent"),console.log(t),t.sort(m);for(const e in t){const o=t[e].user;let c;c=x&&o in x?x[o].name:"",t[e].userName=c}s(t)}console.log("Done"),r(!0)}Object(c.useEffect)((function(){!async function(){console.log("======================================="),console.log("RentHistory initialize"),e.doc.serverAvailable?(o.e(0).then(o.t.bind(null,408,7)),p()):(console.log("Load users"),d())}()}),[]),Object(c.useEffect)((()=>{if(console.log("User list loaded"),console.log(g),console.log(b),j){const o=j.user;var t=[];console.log("User list available");for(let c=0;c<o.length;c++){const n=o[c],s={id:n._id,name:n.name,level:n.level,state:h(e.text,n.state)};t.push(s)}e.doc.setUser(t),f(e.doc.getUser())}}),[j,b,g,e.doc,e.text]),Object(c.useEffect)((()=>{p()}),[x]);const v=t=>Object(a.jsx)("div",{children:Object(a.jsx)("table",{children:Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{id:"id",children:e.text.id}),Object(a.jsx)("th",{id:"rentDate",children:e.text.rentDate}),Object(a.jsx)("th",{id:"returnDate",children:e.text.dueDate})]},"ID"),t&&t.map(((e,t)=>((e,t)=>{const o=e.id,c=e.rentDate,s=e.retDate,l=e.user,r=e.userName,d=t.toString(),u=e.claim;return Object(a.jsxs)(n.a.Fragment,{children:[Object(a.jsxs)("tr",{className:"bookTop",children:[Object(a.jsx)("td",{className:"bookCell",children:Object(a.jsx)(i.b,{to:"/search/"+o,children:o})}),Object(a.jsx)("td",{className:"bookCell",children:c}),Object(a.jsx)("td",{className:"bookCell",children:s})]},d),Object(a.jsxs)("tr",{className:"bookRow",children:[Object(a.jsx)("td",{className:"bookName",children:u}),Object(a.jsxs)("td",{colSpan:"2",className:"bookName",children:[e.totalName+" ",Object(a.jsx)("b",{children:e.title})," "+e.claim_num]})]},d+"Title"),Object(a.jsxs)("tr",{className:"bookBottom",children:[Object(a.jsx)("td",{className:"bookCell",children:Object(a.jsxs)(i.b,{to:"/userSearch/"+l,children:[" ",l," "]})}),Object(a.jsxs)("td",{colSpan:"2",className:"bookCell",children:[" ",r," "]})]},d+"Renter")]},d+"Fragment")})(e,t))),t&&0===t.length&&Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:"3",children:e.text.noEntry})},"None")]})})});return e.doc.initialized?Object(a.jsxs)("div",{id:"situation",children:[Object(a.jsx)("div",{id:"title",children:Object(a.jsx)("h2",{children:e.text.situation})}),Object(a.jsx)("div",{id:"checkOutResult",children:Object(a.jsx)(P,{keyValue:"",list:t,showCallback:e=>v(e)})})]}):Object(a.jsx)(k.a,{to:"/"})};var fe=function(e){const[t,s]=Object(c.useState)([]),[l,r]=Object(c.useState)(""),[d,b]=Object(c.useState)(""),[j,{loading:O,data:g,error:x}]=Object(u.a)(z),[f,{loading:p,data:v,error:S}]=Object(u.a)(Q,{variables:{fromTime:l,toTime:d}}),[N,I]=Object(c.useState)({}),[C,_]=Object(c.useState)(0),[R,A]=Object(c.useState)(0),[D,T]=Object(c.useState)(""),[L]=Object(ee.a)(D,300);Object(c.useEffect)((function(){!async function(){if(console.log("======================================="),console.log("RentHistory initialize"),!e.doc.initialized)return;var t,c,n=document.getElementById("year"),s=document.getElementById("month");for(t=1;t<=12;t++)(c=document.createElement("option")).text=t.toString(),s.add(c,t);const l=(new Date).getFullYear(),i=(new Date).getMonth()+1;for(t=2017;t<=l;t++)(c=document.createElement("option")).text=t.toString(),n.add(c,t);console.log(l),console.log(i),_(l),A(i),document.getElementById("year").value=l,document.getElementById("month").value=i,e.doc.serverAvailable?o.e(0).then(o.t.bind(null,408,7)):(console.log("Load users"),j())}()}),[]),Object(c.useEffect)((()=>{if(console.log("User list loaded"),console.log(x),console.log(O),g){const o=g.user;var t=[];console.log("User list available");for(let c=0;c<o.length;c++){const n=o[c],s={id:n._id,name:n.name,level:n.level,state:h(e.text,n.state)};t.push(s)}e.doc.setUser(t),I(e.doc.getUser())}}),[g,O,x,e.doc,e.text]),Object(c.useEffect)((()=>{if(console.log("History update"),!v)return;const t=v.rentLog;let o=[],c="";for(let s=0;s<t.length;s++){const i=t[s],a=i.book_state;if("1"!==a&&1!==a)continue;if(!i.return_date||0===i.return_date.length)continue;const r=i.book_id,d=i.user_id;var n,l;n=N&&d in N?N[d].name:"",r in e.doc.book?l=e.doc.book[r]:((l={}).author="",l.totalName="",l.claim_num="",l.publish="",l.title="");const u="".concat(l.title," ").concat(l.claim_num);c=i.return_date;let b={index:s,text:u,title:l.title,id:r,rentDate:i.timestamp,retDate:c,author:l.author,totalName:l.series,claim_num:l.claim_num,publish:l.publisher,claim:l.claim,user:d,userName:n};o.push(b)}o.sort(m),console.log(o),s(o)}),[v,p,S]);const B=t=>Object(a.jsx)("div",{children:Object(a.jsx)("table",{children:Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{id:"id",children:e.text.id}),Object(a.jsx)("th",{id:"rentDate",children:e.text.rentDate}),Object(a.jsx)("th",{id:"returnDate",children:e.text.returnDate})]},"ID"),t&&t.map(((e,t)=>((e,t)=>{const o=e.id,c=e.rentDate,s=e.retDate,l=e.claim,r=e.user,d=e.userName,u=t.toString();return Object(a.jsxs)(n.a.Fragment,{children:[Object(a.jsxs)("tr",{className:"bookTop",children:[Object(a.jsx)("td",{className:"bookCell",children:Object(a.jsx)(i.b,{to:"/search/"+o,children:o})}),Object(a.jsx)("td",{className:"bookCell",children:c}),Object(a.jsx)("td",{className:"bookCell",children:s})]},u),Object(a.jsxs)("tr",{className:"bookRow",children:[Object(a.jsx)("td",{className:"bookName",children:l}),Object(a.jsxs)("td",{colSpan:"2",className:"bookCell",children:[e.totalName+" ",Object(a.jsx)("b",{children:e.title})," "+e.claim_num]})]},u+"Title"),Object(a.jsxs)("tr",{className:"bookBottom",children:[Object(a.jsx)("td",{className:"bookCell",children:Object(a.jsxs)(i.b,{to:"/userSearch/"+r,children:[" ",r," "]})}),Object(a.jsxs)("td",{colSpan:"2",className:"bookCell",children:[" ",d," "]})]},u+"Renter")]},u+"Fragment")})(e,t))),t&&0===t.length&&Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:"3",children:e.text.noEntry})},"None")]})})});function w(e,t){switch(console.log(e),console.log(t),e){case 0:_(t);break;case 1:A(parseInt(t))}}return Object(c.useEffect)((function(){T(C.toString()+"-"+R.toString().padStart(2,"0"))}),[C,R]),Object(c.useEffect)((function(){!async function(){if(console.log("Search"),e.doc.serverAvailable){const t="https://"+e.doc.serverInfo.localIp+":"+e.doc.serverInfo.port+"/history",o={period:D},c=await e.doc.requestGet(t,o);console.log(c);const n=c.data.return.books;let l=[],i="";for(let e=0;e<n.length;e++){const t=n[e],o="".concat(t.BOOKNAME," ").concat(t.CLAIMNUM);"_RETURN_DATE"in t&&(i=t._RETURN_DATE);let c={index:e,text:o,title:t.BOOKNAME,id:t.BARCODE,rentDate:t.RENT_DATE,retDate:i,author:t.AUTHOR,totalName:t.TOTAL_NAME,claim_num:t.CLAMENUM,publish:t.PUBLISH,claim:t.CLAIM,user:t.USER,userName:t.USER_NAME};l.push(c)}l.sort(m),s(l)}else{var t;const e=R+1;t=C.toString()+"-"+e.toString().padStart(2,"0"),r(D),b(t),console.log(D),console.log(t);try{await f()}catch(o){console.warn(o.name)}}}()}),[L]),e.doc.initialized?Object(a.jsxs)("div",{id:"checkOut",children:[Object(a.jsx)("div",{id:"title",children:Object(a.jsx)("h2",{children:e.text.history})}),Object(a.jsxs)("div",{id:"searchRange",children:[Object(a.jsx)("div",{className:"page",id:"page",children:Object(a.jsx)(E.a,{fontSize:"large",sx:{color:"#404040"},onClick:()=>{!function(){var e=C,t=R;"string"===typeof e&&(e=parseInt(e)),"string"===typeof t&&(t=parseInt(t)),console.log(e),console.log(t),console.log(typeof e),console.log(typeof t),t>1?t-=1:(e-=1,t=12),_(e),A(t),document.getElementById("year").value=e,document.getElementById("month").value=t}()}})}),Object(a.jsx)("select",{name:"year",id:"year",className:"dropdown",onChange:e=>{w(0,e.target.value)}}),Object(a.jsx)("select",{name:"month",id:"month",className:"dropdown",onChange:e=>{w(1,e.target.value)}}),Object(a.jsx)("div",{className:"page",id:"page",children:Object(a.jsx)(y.a,{fontSize:"large",sx:{color:"#404040"},onClick:()=>{!function(){var e=C,t=R;"string"===typeof e&&(e=parseInt(e)),"string"===typeof t&&(t=parseInt(t)),console.log(e),console.log(t),console.log(typeof e),console.log(typeof t),t<12?t+=1:(e+=1,t=1),_(e),A(t),document.getElementById("year").value=e,document.getElementById("month").value=t}()}})})]}),Object(a.jsx)("div",{id:"checkOutResult",children:Object(a.jsx)(P,{keyValue:L,list:t,showCallback:e=>B(e)})})]}):Object(a.jsx)(k.a,{to:"/"})};var pe=function(e){const[t,n]=Object(c.useState)({}),[s,l]=Object(c.useState)(!1);function i(){var e={USER_CODE:"",USER_NAME:"",PHONE_NUMBER:"",EMAIL:"",ADDRESS:"",NOTICE:"",USER_LEVEL:-1};n(e)}return Object(c.useEffect)((function(){!async function(){e.doc.initialized&&e.doc.serverAvailable&&(o.e(0).then(o.t.bind(null,408,7)),console.log("======================================="),console.log("NewMember initialize"),i())}()}),[]),e.doc.initialized&&e.doc.serverAvailable?Object(a.jsxs)("div",{id:"checkOut",children:[Object(a.jsx)("div",{id:"title",children:Object(a.jsx)("h2",{children:e.text.newMember})}),Object(a.jsx)("div",{id:"checkOutInput",hidden:!e.doc.admin,children:e.doc.serverAvailable&&Object(a.jsx)(ge,{text:e.text,doc:e.doc,info:t,refresh:function(t){console.log("Refresh page "+s),console.log(t),l(!s);const o=j;var c;"OK"===t.data.return?(o.type=ne.c.TYPE.SUCCESS,c=e.text.regSuccess,i()):(o.type=ne.c.TYPE.ERROR,c=e.text.regFail),o.autoClose=3e3,ne.c.info(c,o)}})})]}):Object(a.jsx)(k.a,{to:"/"})},ve=(o(230),o(401));var ke=class{constructor(){console.log("Create Doc class"),this.initialized=!1,this.bookReady=!1,this.rentReady=!1,this.userReady=!1,this.logged=!1,this.userInfo={},this.book={},this.rent={},this.logCallback=void 0,this.admin=!1,this.dueDate="",this.serverInfo={},this.serverAvailable=!1,this.ipAddr=""}async requestGet(e,t){t.os=navigator.platform;const o={params:t};console.log("Request GET : "+e);return await ve.a.get(e,o)}async requestPost(e,t){console.log("Request POST: "+e),t.os=navigator.platform;return await ve.a.post(e,t)}async updateIpAddr(){}checkServerIp(){}checkState(){this.bookReady&&this.rentReady&&(this.initialized=!0,ne.c.dismiss(),this.callback&&this.callback())}setLogCallback(e){this.logCallback=e}setRent(e){this.rent=e,this.rentReady=!0,this.checkState(),this.checkRent()}setServerInfo(e){console.log(e),this.serverInfo=e,this.serverInfo={},this.serverInfo.globalIp=e.globalIp,e.proxy?(this.serverInfo.localIp="libserver.hkmcclibrary.duckdns.org",this.serverInfo.port=443):(this.serverInfo.localIp=e.localIp,this.serverInfo.port=e.port),console.log(this.serverInfo),this.checkServerIp()}setBook(e){this.book={};for(let t=0;t<e.length;t++){const o=e[t],c=o._id;this.book[c]={...o},this.book[c].claim=o.claim.replace(/_/g," ")}this.bookReady=!0,this.checkState()}setUser(e){this.user={};for(let t=0;t<e.length;t++){const o=e[t],c=o.id;this.user[c]=o,this.user[c].rent=0}this.userReady=!0,this.checkRent()}checkRent(){if(this.userReady&&this.rentReady)for(let e=0;e<this.rent.length;e++){const t=this.rent[e].state;if("1"!==t&&"3"!==t&&1!==t&&3!==t)continue;const o=this.rent[e].user_id;o&&o.length>0&&o in this.user?"rent"in this.user[o]?this.user[o].rent+=1:this.user[o].rent=1:(console.log("Invalid user"),console.log(this.rent[e]))}else console.log("Cannot check rent")}logIn(e){console.log("Logged in: "+e._id),this.logged=!0,this.userInfo=e,"2"!==e.level&&2!==e.level||(this.admin=!0),this.logCallback&&this.logCallback(!0)}logOut(){console.log("Logged out"),this.logged=!1,this.admin=!1,this.userInfo={},this.logCallback&&this.logCallback(!1)}async getRent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=[];if(this.serverAvailable){const o="https://"+this.serverInfo.localIp+":"+this.serverInfo.port+"/book",c={user:e},n=await this.requestGet(o,c);if(console.log(n),"books"in n.data.return)for(const e of n.data.return.books){console.log(e);const o={id:e.BARCODE,title:e.BOOKNAME,claim:e.CLAIM,claim_num:e.CLAMENUM,totalName:e.TOTAL_NAME,rentDate:e.LENT_DATE,retDate:e.RETURN_DATE,stat:e.STATS,extendCount:e._EXTEND_COUNT};t.push(o)}}else{if(console.log("Check "+e),console.log(this.bookReady),!this.bookReady)return t;for(let o=0;o<this.rent.length;o++){const c=this.rent[o];if(void 0!==e&&c.user_id!==e)continue;if("1"!==c.state&&"3"!==c.state&&1!==c.state&&3!==c.state)continue;const n=c.book_id,s=this.book[n];let l={};l.id=s._id,l.title=s.title,l.claim_num=s.claim_num,l.totalName=s.series,l.rentDate=c.rent_date.split(" ")[0].replace("-","/",2).replace("-","/"),l.retDate=c.return_date.split(" ")[0].replace("-","/",2).replace("-","/"),l.claim=s.claim,l.user=c.user_id,t.push(l)}}return t}getUser(){return this.user}async openDoc(){try{this.initialized=!0}catch(e){return console.log(e),!1}return!0}isOpen(){return this.initialized}setCallback(e){console.log("Update function registered"),this.callback=e}},Se=o(198);const Ee=new(o(233))(Se.privateKey);var Ne=class{constructor(){console.log("Create Context"),console.log("Cookies");const e=document.cookie;this.cookie=e.split(";").map((e=>e.split("="))).reduce(((e,t)=>{const o=t.shift().trim(),c=t.join("=").trim();return e[decodeURIComponent(o)]=decodeURIComponent(c),e}),{})}checkLogIn(e,t){var o,c=!1;if(e&&t.length>0){console.log("User data available");const s=e.encrypted_email,l=e.encrypted_phone;if(o=Ee.sign(t,"base64"),t===s||t===l)o=t,c=!0;else if(s===o)c=!0;else{var n="";for(let e=0;e<t.length;e++)isNaN(t[e])||(n+=t[e]);(o=Ee.sign(n,"base64"))===l&&(c=!0)}}if(c){const e=new Date,t=2;e.setTime(e.getTime()+24*t*60*60*1e3);const c=e.toGMTString();document.cookie="password="+o+"; expires="+c+" ; SameSite=Lax ;"}return c}},ye=o(136),Ie=o(199),Ce=(o(358),o(359),o(200)),_e=o.n(Ce);var Re=function(e){const[t,n]=Object(c.useState)(!1);return Object(c.useEffect)((()=>{function c(){console.log("Close"),console.log(t),n(!1)}e.doc.serverAvailable&&o.e(4).then(o.t.bind(null,409,7)),t&&window.addEventListener("click",c);const s=document.getElementById("dropdown-menu");return t?s.classList.add("is-show"):s.classList.remove("is-show"),function(){window.removeEventListener("click",c)}}),[t,e.doc.logged,e.doc.serverAvailable]),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"menu",onClick:()=>{console.log("Click menu"),n(!t),console.log(t)},children:Object(a.jsx)(_e.a,{className:"img",fontSize:"large",sx:{color:"#ffffff"}})}),Object(a.jsxs)("div",{id:"dropdown-menu",onClick:()=>{n(!1)},className:"dropdown-menu",children:[!e.doc.serverAvailable&&e.doc.logged&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"menu-items",children:e.doc.userInfo._id+" : "+e.doc.userInfo.name+e.text.nameSuffix}),Object(a.jsx)("hr",{className:"hline"})]}),Object(a.jsx)(i.b,{className:"menu-items",to:"/",children:e.text.home}),Object(a.jsx)(i.b,{className:"menu-items",to:"/notice",children:e.text.notice}),Object(a.jsx)(i.b,{className:"menu-items",to:"/search",children:e.text.bookSearch}),e.doc.serverAvailable&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(i.b,{className:"menu-items",to:"/checkOut",children:e.text.checkOut}),Object(a.jsx)(i.b,{className:"menu-items",to:"/return",children:e.text.return})]}),!e.doc.serverAvailable&&e.doc.logged&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(i.b,{className:"menu-items",to:"/checkOutStatus",children:e.text.checkOutStatus})}),e.doc.admin&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("hr",{className:"hline"}),Object(a.jsx)(i.b,{className:"menu-items",to:"/userSearch",children:e.text.userSearch}),Object(a.jsx)(i.b,{className:"menu-items",to:"/rentalSituation",children:e.text.situation}),Object(a.jsx)(i.b,{className:"menu-items",to:"/rentHistory",children:e.text.history})]}),e.doc.serverAvailable&&e.doc.admin&&Object(a.jsx)(i.b,{className:"menu-items",to:"/newMember",children:e.text.newMember}),!e.doc.serverAvailable&&e.doc.logged&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("hr",{className:"hline"}),Object(a.jsx)("div",{className:"menu-items",onClick:()=>{e.doc.logOut(),document.cookie="user_id=",document.cookie="password=",document.cookie="autoLogin=false"},children:e.text.logOut})]}),!e.doc.serverAvailable&&!e.doc.logged&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(i.b,{className:"menu-items",to:"/checkOutStatus",children:e.text.logIn})})]})]})};var Ae=function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{id:"navbar",className:"navbar",children:[Object(a.jsx)("div",{className:"title",children:Ie.isMobile?Object(a.jsx)("h1",{children:e.text.titleShort}):Object(a.jsx)("h1",{children:e.text.titleLong})}),Object(a.jsx)(Re,{text:e.text,doc:e.doc})]})})};const De=new ke,Te=new Ne,Le={};let Be="";var we=function(){const[e,t]=Object(c.useState)(!1),[o,n]=Object(c.useState)(!1),[s,l]=Object(c.useState)(""),{loading:b,error:h,data:O}=Object(d.e)(K),{loading:g,error:x,data:m}=Object(d.e)($),[f,{loading:v,error:S,data:E}]=Object(u.a)(F),[N,{data:y}]=Object(u.a)(V,{variables:{_id:s}});function I(){const e=j;e.type=ne.c.TYPE.SUCCESS,e.render=Le.succeededToOpen,e.autoClose=3e3,e.toastId="",ne.c.info(Le.succeededToOpen,e)}function C(e){console.log("==== Update logging state "+De.logged),n(De.logged)}return Object(c.useEffect)((function(){!async function(){console.log("Initialize app"),console.log("Platform: "),console.log(navigator.platform),Be+="<p>Initialize app</p>",console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/library",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NAME:"library",REACT_APP_VERSION:"0.9.9"}).APP_NAME),console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/library",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NAME:"library",REACT_APP_VERSION:"0.9.9"}).APP_VERSION);const e=navigator.languages;console.log(e);let o={};o=e.length>0&&(e[0].toLowerCase().includes("kr")||e[0].toLowerCase().includes("ko"))?ye.kr:ye.en;for(let t in o)Le[t]=o[t];await De.updateIpAddr(),"autoLogin"in Te.cookie&&"true"===Te.cookie.autoLogin&&(console.log("Auto Login: "+Te.cookie.user_id),l(Te.cookie.user_id),console.log(Te.cookie.nothing),N()),t(!0)}()}),[N]),Object(c.useEffect)((()=>{if(console.log("User data loaded"),!y)return;const e=y.user[0];Te.cookie.password&&Te.checkLogIn(e,Te.cookie.password)&&(console.log("Login suceeded"),De.logIn(e))}),[y]),Object(c.useEffect)((()=>{console.log("Rent Query Updated"),Be=Be+"<p>Rent Query Updated "+b+" "+h+"</p>",console.log(b),console.log("Rent Error"),console.log(h),O&&(console.log("Rent available"),Be+="<p>Rent available</p>",De.setRent(O.rent),De.initialized&&I())}),[b,h,O]),Object(c.useEffect)((()=>{console.log("Book Query Updated"),Be+="<p>Book Query Updated</p>",console.log(v),console.log(S),E&&(console.log("Book available"),Be+="<p>Book available</p>",De.setBook(E.book),De.initialized&&I())}),[v,S,E]),Object(c.useEffect)((()=>{if(console.log("Server Query Updated"),Be+="<p>Server Query Updated</p>",console.log(m),console.log(e),m&&e&&(console.log("Server info available"),Be+="<p>Server info available</p>",console.log(m),De.setServerInfo(m.serverInfo),!De.serverAvailable)){console.log("Server is not available. Load books from cloud DB"),f();const e=j;e.type=ne.c.TYPE.LOADING,e.autoClose=!1,e.toastId=p,ne.c.loading(Le.loading,e),De.setLogCallback(C)}}),[g,x,m,f,e]),Object(a.jsx)(i.a,{children:Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("div",{children:Object(a.jsx)(ne.a,{newestOnTop:!0,closeOnClick:!0,rtl:!1,draggable:!0,pauseOnHover:!0,pauseOnFocusLoss:!1,transition:ne.b,limit:10})}),Object(a.jsx)(Ae,{doc:De,text:Le}),Object(a.jsxs)(k.d,{children:[Object(a.jsx)(k.b,{path:"/",element:Object(a.jsx)(r,{doc:De,text:Le})}),Object(a.jsx)(k.b,{path:"/notice/:id?",element:Object(a.jsx)(X,{doc:De,text:Le})}),Object(a.jsx)(k.b,{path:"/search/:id?",element:Object(a.jsx)(ce,{doc:De,text:Le})}),Object(a.jsx)(k.b,{path:"/checkOutStatus",element:Object(a.jsx)(ae,{context:Te,doc:De,text:Le,logged:o})}),Object(a.jsx)(k.b,{path:"/userSearch/:id?",element:Object(a.jsx)(xe,{context:Te,doc:De,text:Le})}),Object(a.jsx)(k.b,{path:"/checkOut/:id?",element:Object(a.jsx)(be,{context:Te,doc:De,text:Le})}),Object(a.jsx)(k.b,{path:"/return",element:Object(a.jsx)(Oe,{context:Te,doc:De,text:Le})}),Object(a.jsx)(k.b,{path:"/rentalSituation",element:Object(a.jsx)(me,{context:Te,doc:De,text:Le})}),Object(a.jsx)(k.b,{path:"/rentHistory",element:Object(a.jsx)(fe,{context:Te,doc:De,text:Le})}),Object(a.jsx)(k.b,{path:"/newMember",element:Object(a.jsx)(pe,{context:Te,doc:De,text:Le})})]}),Object(a.jsxs)("h3",{children:["v ","0.9.9"]})]})})};var Ue=e=>{e&&e instanceof Function&&o.e(5).then(o.bind(null,410)).then((t=>{let{getCLS:o,getFID:c,getFCP:n,getLCP:s,getTTFB:l}=t;o(e),c(e),n(e),s(e),l(e)}))},Me=o(403),Pe=o(402),He=o(404),qe=o(400);const Fe=new Me.a({link:new Pe.a({uri:"https://hkmcc-library.hasura.app/v1/graphql",headers:{"x-hasura-admin-secret":"bkkZk6R6B9zITCmVyVDCtjDLWURfW4lC0ye04GP4UWN77ASpl69W6bk4BvyjN9ZH"}}),cache:new He.a});l.a.render(Object(a.jsx)(n.a.StrictMode,{children:Object(a.jsx)(qe.a,{client:Fe,children:Object(a.jsx)(we,{})})}),document.getElementById("root")),Ue()},43:function(e,t,o){}},[[361,2,3]]]);
//# sourceMappingURL=main.9e7d006c.chunk.js.map